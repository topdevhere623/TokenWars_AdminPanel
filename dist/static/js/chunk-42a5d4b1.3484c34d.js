(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42a5d4b1"],{a179:function(e,t,a){},c363:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrapper"},[t("div",{staticClass:"public-list-inputs"},[t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Input card number",clearable:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter the exchange account",clearable:""},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Input remarks",clearable:""},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}}),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"All states",clearable:""},model:{value:e.cardStatus,callback:function(t){e.cardStatus=t},expression:"cardStatus"}},[t("el-option",{attrs:{label:"Be exchanged",value:"1"}}),t("el-option",{attrs:{label:"Exchanged",value:"2"}}),t("el-option",{attrs:{label:"Fail",value:"3"}})],1),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"All types",clearable:""},model:{value:e.cardType,callback:function(t){e.cardType=t},expression:"cardType"}},[t("el-option",{attrs:{label:"single",value:"SINGLE"}}),t("el-option",{attrs:{label:"Private chat code",value:"PRIVATE"}}),t("el-option",{attrs:{label:"Unlimited",value:"UNLIMITED"}}),t("el-option",{attrs:{label:"gift card",value:"GIFTCARD"}})],1),t("div",{staticClass:"public-date-box"},[t("span",{staticClass:"demonstration"},[e._v(" Amount ")]),t("el-input",{staticStyle:{width:"120px",border:"1px solid #dcdfe6","border-radius":"4px"},attrs:{type:"number",placeholder:"Minimum price",clearable:""},model:{value:e.amountStart,callback:function(t){e.amountStart=t},expression:"amountStart"}}),t("el-input",{staticStyle:{width:"120px",border:"1px solid #dcdfe6","border-radius":"4px"},attrs:{type:"number",placeholder:"Highest price",clearable:""},model:{value:e.amountEnd,callback:function(t){e.amountEnd=t},expression:"amountEnd"}})],1),t("div",{staticClass:"public-date-box"},[t("span",{staticClass:"demonstration"},[e._v(" Creation time ")]),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"arrive","start-placeholder":"Starting time","end-placeholder":"End Time"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}})],1),t("div",{staticClass:"public-date-box"},[t("span",{staticClass:"demonstration"},[e._v(" Failure time ")]),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"arrive","start-placeholder":"Starting time","end-placeholder":"End Time"},model:{value:e.failureTime,callback:function(t){e.failureTime=t},expression:"failureTime"}})],1),t("div",{staticClass:"public-date-box"},[t("span",{staticClass:"demonstration"},[e._v(" Redeem time ")]),t("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","range-separator":"arrive","start-placeholder":"Starting time","end-placeholder":"End Time"},model:{value:e.conversionTime,callback:function(t){e.conversionTime=t},expression:"conversionTime"}})],1),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getTableListFunc()}}},[e._v(" Inquire ")]),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.onExport()}}},[e._v(" Export ")]),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.addFunc()}}},[e._v(" Add to ")]),t("el-button",{staticClass:"public-search",attrs:{type:"danger",icon:"el-icon-remove-outline"},on:{click:function(t){return e.handleBatchInvalidation()}}},[e._v(" Failure ")]),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.couponsFunc()}}},[e._v(" Configuration acquisition channel ")])],1),t("div",{staticClass:"remittance-box"},[t("div",{staticClass:"remittance-amount remittance-more"},[t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("General Gift Code")]),t("div",{staticClass:"val"},[e._v(" "+e._s(e.aggregateQuery&&e.aggregateQuery.redeemCodeTotal)+" ")])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Exchange number")]),t("div",{staticClass:"val"},[e._v(" "+e._s(e.aggregateQuery&&e.aggregateQuery.redeemedNumber)+" ")])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Exchange amount")]),t("div",{staticClass:"val"},[e._v(" "+e._s(e.aggregateQuery&&e.aggregateQuery.redeemedAmountTotal)+" ")])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("balance")]),t("div",{staticClass:"val"},[e._v(" "+e._s(e.aggregateQuery&&e.aggregateQuery.notRedeemedAmountTotal)+" ")])])])]),t("el-table",{staticClass:"public-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"sort-change":e.sortChange}},[t("el-table-column",{key:"1",attrs:{prop:"id",label:"card number",align:"center"}}),t("el-table-column",{key:"2",attrs:{prop:"cardamom",label:"Dense",align:"center"}}),t("el-table-column",{key:"3",attrs:{prop:"amount",label:"Amount",align:"center"}}),t("el-table-column",{key:"4",attrs:{prop:"cardSource",label:"source",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(" "+e._s("PLATFORM"==a.row.cardSource?"platform":"other")+" ")])]}}])}),t("el-table-column",{key:"5",attrs:{prop:"cardType",label:"type",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",[e._v(" "+e._s("SINGLE"==a.row.cardType?"single":"PRIVATE"==a.row.cardType?"Private chat code":"UNLIMITED"==a.row.cardType?"Unlimited":"gift card")+" ")])]}}])}),t("el-table-column",{key:"6",attrs:{prop:"cardStatus",label:"state",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[2==a.row.cardStatus?t("p",{staticStyle:{color:"#67c23a"}},[e._v("Exchanged")]):3==a.row.cardStatus?t("p",{staticStyle:{color:"#f56c6c"}},[e._v("Fail")]):t("p",{staticStyle:{color:"#888888"}},[e._v("Be exchanged")])]}}])}),t("el-table-column",{key:"7",attrs:{prop:"rebateRate",label:"Exchange account",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",{style:{color:"INNER"==a.row.userType?"red":"#000"}},[e._v(" "+e._s(a.row.userId||"--")+" ")]),t("p",{style:{color:"INNER"==a.row.userType?"red":"#000"}},[e._v(" "+e._s(a.row.userName||"--")+" ")])]}}])}),t("el-table-column",{key:"20",attrs:{prop:"remark",label:"Remark",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{key:"8",attrs:{prop:"createTime",width:"140",label:"Creation time",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.timeForStr(t.row.createTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),t("el-table-column",{key:"9",attrs:{prop:"expirationTime",width:"140",label:"Failure time",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.timeForStr(t.row.expirationTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),t("el-table-column",{key:"10",attrs:{prop:"redeemTime",width:"140",label:"Redeem time",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.timeForStr(t.row.redeemTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),t("el-table-column",{key:"19",attrs:{prop:"id",label:"operate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.cardStatus?t("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return e.handleInvalid(a.row)}}},[e._v("Fail")]):e._e()]}}])})],1),e.baseUserPage&&e.baseUserPage.total?t("el-pagination",{staticClass:"public-pagination",attrs:{background:"","current-page":e.page,"page-sizes":e.pagination.pageSizes,"page-size":e.size,layout:" sizes, prev, pager, next, jumper",total:e.baseUserPage.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),t("el-dialog",{attrs:{width:"440px","close-on-click-modal":!1,title:"Create the exchange code",visible:e.showAddFunc,"append-to-body":"","before-close":e.handleClose},on:{"update:visible":function(t){e.showAddFunc=t}}},[t("el-form",{ref:"ruleForm",staticClass:"add-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"Amount",prop:"amount",rules:e.rules.blur}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number"},model:{value:e.ruleForm.amount,callback:function(t){e.$set(e.ruleForm,"amount",t)},expression:"ruleForm.amount"}},[t("template",{slot:"append"},[e._v("U")])],2)],1),t("el-form-item",{attrs:{label:"quantity",prop:"number",rules:e.rules.blur}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number"},model:{value:e.ruleForm.number,callback:function(t){e.$set(e.ruleForm,"number",e._n(t))},expression:"ruleForm.number"}})],1),t("el-form-item",{attrs:{label:"type",prop:"cardType",rules:e.rules.select}},[t("el-select",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.ruleForm.cardType,callback:function(t){e.$set(e.ruleForm,"cardType",t)},expression:"ruleForm.cardType"}},[t("el-option",{attrs:{label:"single",value:"SINGLE"}}),t("el-option",{attrs:{label:"Private chat code",value:"PRIVATE"}}),t("el-option",{attrs:{label:"Unlimited",value:"UNLIMITED"}}),t("el-option",{attrs:{label:"gift card",value:"GIFTCARD"}})],1)],1),t("el-form-item",{attrs:{label:"Validity period"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number"},model:{value:e.ruleForm.validDate,callback:function(t){e.$set(e.ruleForm,"validDate",e._n(t))},expression:"ruleForm.validDate"}},[t("template",{slot:"append"},[e._v("sky")])],2)],1),t("el-form-item",{attrs:{label:"Remark"}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitFunc()}}},[e._v("Sure")])],1)],1),t("el-dialog",{attrs:{width:"440px","close-on-click-modal":!1,title:"Channel configuration",visible:e.showCouponsFunc,"append-to-body":"","before-close":e.handleClose},on:{"update:visible":function(t){e.showCouponsFunc=t}}},[t("el-form",{ref:"couponsForm",staticClass:"add-form",attrs:{rules:e.couponsRules,model:e.couponsForm,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"Channel name",prop:"channelName",rules:e.rules.channelName}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.couponsForm.channelName,callback:function(t){e.$set(e.couponsForm,"channelName",t)},expression:"couponsForm.channelName"}})],1),t("el-form-item",{attrs:{label:"Link",prop:"url",rules:e.rules.url}},[t("el-input",{staticStyle:{width:"300px"},model:{value:e.couponsForm.url,callback:function(t){e.$set(e.couponsForm,"url",e._n(t))},expression:"couponsForm.url"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitCouponsFunc()}}},[e._v("Sure")])],1)],1)],1)},n=[],l=a("c7eb"),s=a("5530"),i=a("1da1"),o=a("3835"),c=a("901e"),u=a.n(c),p=a("ed08"),d=a("1b80"),m=a("51be"),b={name:"invitationRebate",components:{},data:function(){return{id:null,userName:null,inviteCode:null,remark:null,createTime:null,failureTime:null,conversionTime:null,cardStatus:null,cardType:null,amountStart:null,amountEnd:null,sortData:{orderBy:null,orderType:null},page:1,size:20,tableData:null,baseUserPage:null,aggregateQuery:null,showAddFunc:!1,ruleForm:{amount:null,number:null,cardType:null,validDate:30,remark:null},rules:{select:[{required:!0,message:"please choose",trigger:["blur","change"]}],blur:[{required:!0,message:"please enter",trigger:["blur","change"]}]},showCouponsFunc:!1,couponsForm:{channelName:null,url:null},couponsRules:{channelName:[{required:!0,message:"please enter",trigger:["blur","change"]}],url:[{required:!0,message:"please enter",trigger:["blur","change"]}]}}},mixins:[d["a"]],methods:{bigNumber:u.a,timeForStr:p["h"],searchFun:function(){this.lastPickUpTime;if(this.createTime)var e=Object(o["a"])(this.createTime,2),t=e[0],a=e[1];if(this.failureTime)var r=Object(o["a"])(this.failureTime,2),n=r[0],l=r[1];if(this.conversionTime)var s=Object(o["a"])(this.conversionTime,2),i=s[0],c=s[1];return{id:this.id,userName:this.userName,remark:this.remark,cardStatus:this.cardStatus,cardType:this.cardType,amountStart:this.amountStart,amountEnd:this.amountEnd,createTimeStart:t,createTimeEnd:a,expirationTimeStart:n,expirationTimeEnd:l,redeemTimeStart:i,redeemTimeEnd:c}},sortChange:function(e){e.column;var t=e.prop,a=e.order;this.sortData.orderBy=t,this.sortData.orderType="descending"==a?"DESC":"ASC",a||(this.sortData.orderType=null),this.getTableListFunc()},getTableListFunc:function(){var e=arguments,t=this;return Object(i["a"])(Object(l["a"])().mark((function a(){var r,n,i,o,c,u,p,d,m;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=!(e.length>0&&void 0!==e[0])||e[0],n=t.searchFun(),t.sortData,i=t.size,o=t.coin,c=t.userType,u=t.page,r&&(t.page=1,u=1),p=Object(s["a"])(Object(s["a"])(Object(s["a"])({},{userType:c,coin:o,size:i,page:u}),t.sortData),n),a.next=8,t.$http.getRedeemPageList(p);case 8:return d=a.sent,d&&(t.baseUserPage=d,t.tableData=d.records),delete p.size,delete p.page,a.next=14,t.$http.getRedeemHeaderDataTotal(p);case 14:m=a.sent,m&&(t.aggregateQuery=m);case 16:case"end":return a.stop()}}),a)})))()},handleInvalid:function(e){var t=this;this.$confirm("Are you sure to perform this operation?","hint",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(i["a"])(Object(l["a"])().mark((function a(){var r;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.redeeminvalid({redeemId:e.id});case 2:r=a.sent,r&&(t.getTableListFunc(),t.$message.success("Successful operation"));case 4:case"end":return a.stop()}}),a)})))).catch((function(e){console.error(e)}))},handleBatchInvalidation:function(){var e=this;this.$confirm("Are you sure to perform this operation?","hint",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(i["a"])(Object(l["a"])().mark((function t(){var a,r;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.searchFun(),t.next=3,e.$http.redeemBatchInvalidation(Object(s["a"])({},a));case 3:r=t.sent,r&&(e.getTableListFunc(),e.$message.success("Successful operation"));case 5:case"end":return t.stop()}}),t)})))).catch((function(e){console.error(e)}))},addFunc:function(e){this.showAddFunc=!0},submitFunc:function(){var e=this;return Object(i["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.ruleForm.validate(function(){var t=Object(i["a"])(Object(l["a"])().mark((function t(a){var r,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return r=Object(s["a"])({},e.ruleForm),t.next=4,e.$http.redeemHeaderAdd(Object(s["a"])({},r));case 4:n=t.sent,n&&(e.handleClose(),e.getTableListFunc(),e.$message.success("Successful operation"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},onExport:function(){var e=this.searchFun(),t=m["a"].api+"/redeem-code-info/exportExcel",a=this.coin,r=this.userType,n=Object(s["a"])(Object(s["a"])({},{coin:a,userType:r}),e);Object(p["c"])(t,n,"Export of the redemption code list")},getFindRedeemTextSetting:function(){var e=this;return Object(i["a"])(Object(l["a"])().mark((function t(){var a;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getFindRedeemTextSetting();case 2:a=t.sent,a&&(e.couponsForm=Object(s["a"])({},a),e.$forceUpdate());case 4:case"end":return t.stop()}}),t)})))()},couponsFunc:function(){this.getFindRedeemTextSetting(),this.showCouponsFunc=!0},submitCouponsFunc:function(){var e=this;return Object(i["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.couponsForm.validate(function(){var t=Object(i["a"])(Object(l["a"])().mark((function t(a){var r,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=6;break}return r=Object(s["a"])({},e.couponsForm),t.next=4,e.$http.setRedeemTextSetting(Object(s["a"])({},r));case 4:n=t.sent,n&&(e.handleClose(),e.getFindRedeemTextSetting(),e.$message.success("Successful operation"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()},handleClose:function(e){e?e():(this.showAddFunc=!1,this.showCouponsFunc=!1)},handleSizeChange:function(e){this.size=e,this.getTableListFunc()},handleCurrentChange:function(e){this.page=e,this.getTableListFunc(!1)}},created:function(){this.getTableListFunc()},computed:{coin:function(){return this.$store.getters.coinConfig},userType:function(){return this.$store.getters.accountConfig}},mounted:function(){},updated:function(){},beforeDestroy:function(){}},h=b,f=(a("fdba"),a("2877")),g=Object(f["a"])(h,r,n,!1,null,"14da3b4a",null);t["default"]=g.exports},fdba:function(e,t,a){"use strict";a("a179")}}]);