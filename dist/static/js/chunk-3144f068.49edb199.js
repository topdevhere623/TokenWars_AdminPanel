(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3144f068"],{5287:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrapper"},[t("div",{staticClass:"public-list-inputs"},[t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter flowing water number",clearable:""},model:{value:e.Id,callback:function(t){e.Id=t},expression:"Id"}}),t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter user ID",clearable:""},model:{value:e.userId,callback:function(t){e.userId=t},expression:"userId"}}),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"All sources",clearable:""},model:{value:e.flowSource,callback:function(t){e.flowSource=t},expression:"flowSource"}},[t("el-option",{attrs:{label:"注册",value:"REG"}}),t("el-option",{attrs:{label:"消费",value:"CONSUME"}}),t("el-option",{attrs:{label:"邀请",value:"INVITE"}}),t("el-option",{attrs:{label:"下级消费",value:"DOWN_CONSUME"}})],1),t("div",{staticClass:"public-date-box"},[t("span",{staticClass:"demonstration"},[e._v(" Account change time ")]),t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"到","start-placeholder":"Starting time","end-placeholder":"End Time"},model:{value:e.changeTime,callback:function(t){e.changeTime=t},expression:"changeTime"}})],1),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchAssetPointFlowList()}}},[e._v(" Inquire ")]),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.onExport()}}},[e._v(" Export ")])],1),t("div",{staticClass:"remittance-box"},[t("div",{staticClass:"remittance-amount remittance-more"},[t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total flowing water")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.flowNumberTotal))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total points are produced")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.pointOutputTotal))])])])]),t("el-table",{staticClass:"public-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"sort-change":e.sortChange}},[t("el-table-column",{key:"1",attrs:{prop:"id",sortable:"custom",label:"serial number",align:"center"}}),t("el-table-column",{key:"2",attrs:{prop:"userName",sortable:"custom",width:"120",label:"user",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("p",{style:{color:"INNER"==a.row.userType?"red":"#000"}},[e._v(" "+e._s(a.row.userId||"--")+" ")]),t("p",{style:{color:"INNER"==a.row.userType?"red":"#000"}},[e._v(" "+e._s(a.row.userName||"--")+" ")])]}}])}),t("el-table-column",{key:"3",attrs:{prop:"flowSource",sortable:"custom",label:"来源",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return["REG"==a.row.flowSource?t("span",[e._v("register")]):e._e(),"CONSUME"==a.row.flowSource?t("span",[e._v("Consumption")]):e._e(),"INVITE"==a.row.flowSource?t("span",[e._v("invite")]):e._e(),"DOWN_CONSUME"==a.row.flowSource?t("span",[e._v("Lower -level consumption")]):e._e()]}}])}),t("el-table-column",{key:"4",attrs:{prop:"downId",sortable:"custom",label:"Lower ID",align:"center"}}),t("el-table-column",{key:"5",attrs:{prop:"orderNumber",label:"Transaction number number",align:"center"}}),t("el-table-column",{key:"6",attrs:{prop:"changePoint",sortable:"custom",label:"quantity",align:"center"}}),t("el-table-column",{key:"7",attrs:{prop:"totalPoint",sortable:"custom",label:"total points",align:"center"}}),t("el-table-column",{key:"8",attrs:{prop:"createTime",sortable:"custom",label:"Account change time",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.timeForStr(t.row.createTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])})],1),e.baseUserPage&&e.baseUserPage.total?t("el-pagination",{staticClass:"public-pagination",attrs:{background:"","current-page":e.page,"page-sizes":e.pagination.pageSizes,"page-size":e.size,layout:" sizes, prev, pager, next, jumper",total:e.baseUserPage.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)},r=[],n=a("c7eb"),l=a("5530"),o=a("1da1"),i=a("901e"),c=a.n(i),u=a("ed08"),p=a("1b80"),d=a("51be"),b={name:"IntegralTurnover",components:{},data:function(){return{Id:null,userId:null,flowSource:null,changeTime:null,sortData:{orderBy:null,orderType:null},page:1,size:20,tableData:null,baseUserPage:null,aggregateQuery:null}},mixins:[p["a"]],methods:{bigNumber:c.a,timeForStr:u["h"],searchFun:function(){var e=this.changeTime,t=null,a=null;return e&&e[0]&&(t=Object(u["h"])(e[0],"YYYY-MM-DD HH:mm:ss")),e&&e[1]&&(a=Object(u["h"])(e[1],"YYYY-MM-DD HH:mm:ss")),{id:this.Id,userId:this.userId,flowSource:this.flowSource,startTime:t,endTime:a}},sortChange:function(e){e.column;var t=e.prop,a=e.order;this.sortData.orderBy=t,this.sortData.orderType="descending"==a?"DESC":"ASC",a||(this.sortData.orderType=null),this.fetchAssetPointFlowList()},fetchAssetPointFlowList:function(){var e=arguments,t=this;return Object(o["a"])(Object(n["a"])().mark((function a(){var s,r,o,i,c,u,p,d,b;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=!(e.length>0&&void 0!==e[0])||e[0],r=t.searchFun(),o=t.sortData,i=t.size,c=t.userType,u=t.page,s&&(t.page=1,u=1),p=Object(l["a"])(Object(l["a"])(Object(l["a"])({},{userType:c,size:i,page:u}),o),r),a.next=8,t.$http.getAssetPointFlowList(p);case 8:return d=a.sent,d&&(t.baseUserPage=d,t.tableData=d.records),delete p.size,delete p.page,a.next=14,t.$http.getAssetPointFlowStatistics(p);case 14:b=a.sent,b&&(t.aggregateQuery=b);case 16:case"end":return a.stop()}}),a)})))()},onExport:function(){var e=this.searchFun(),t=d["a"].api+"/asset-point-flow/exportExcel",a=this.coin,s=this.userType,r=Object(l["a"])(Object(l["a"])({},{coin:a,userType:s}),e);Object(u["c"])(t,r,"Confatting water export")},handleSizeChange:function(e){this.size=e,this.fetchAssetPointFlowList()},handleCurrentChange:function(e){this.page=e,this.fetchAssetPointFlowList(!1)}},created:function(){this.fetchAssetPointFlowList()},computed:{coin:function(){return this.$store.getters.coinConfig},userType:function(){return this.$store.getters.accountConfig}},mounted:function(){},updated:function(){},beforeDestroy:function(){}},g=b,h=(a("5486"),a("2877")),m=Object(h["a"])(g,s,r,!1,null,"779c618b",null);t["default"]=m.exports},5486:function(e,t,a){"use strict";a("7450")},7450:function(e,t,a){}}]);