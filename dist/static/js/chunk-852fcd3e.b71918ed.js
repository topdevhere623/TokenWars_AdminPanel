(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-852fcd3e"],{"25c1":function(e,t,r){e.exports=r.p+"static/img/icon_benchmark_active.c969c097.svg"},"37f6":function(e,t,r){e.exports=r.p+"static/img/icon_calculator.d1c801ff.svg"},"4e57":function(e,t,r){e.exports=r.p+"static/img/icon_delete.703521bc.svg"},"61a6":function(e,t,r){"use strict";r.r(t);r("a9e3"),r("b680");var a,l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrapper"},[t("div",{staticClass:"public-list-inputs"},[t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter the blind box ID",clearable:""},model:{value:e.Id,callback:function(t){e.Id=t},expression:"Id"}}),t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter the name of the blind box",clearable:""},model:{value:e.boxName,callback:function(t){e.boxName=t},expression:"boxName"}}),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"External state",clearable:""},model:{value:e.externalStatus,callback:function(t){e.externalStatus=t},expression:"externalStatus"}},[t("el-option",{attrs:{label:"normal",value:"NORMAL"}}),t("el-option",{attrs:{label:"Insufficient quantity",value:"NUMBER"}})],1),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"Blind box state",clearable:""},model:{value:e.boxStatus,callback:function(t){e.boxStatus=t},expression:"boxStatus"}},[t("el-option",{attrs:{label:"freeze",value:"DISABLE"}}),t("el-option",{attrs:{label:"normal",value:"NORMAL"}})],1),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchBoxManagerList()}}},[e._v(" Inquire ")]),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.addBox()}}},[e._v(" Add a blind box ")])],1),t("div",{staticClass:"remittance-box"},[t("div",{staticClass:"remittance-amount remittance-more"},[t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total blind box number")]),t("div",{staticClass:"val"},[e._v(e._s(e.baseUserPage&&e.baseUserPage.total))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total number")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.openBoxNumber))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("total value")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.priceTotal))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total number of times")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.outNumberTotal))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total refund number")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.refundsTotalNumber))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total revenue")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.grossIncome))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("total expenses")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.totalOpenNftPrice))])]),t("div",{staticClass:"remittance-item"},[t("div",{staticClass:"title"},[e._v("Total revenue")]),t("div",{staticClass:"val"},[e._v(e._s(e.aggregateQuery&&e.aggregateQuery.grossIncomeU))])])])]),t("el-table",{staticClass:"public-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"sort-change":e.sortChange}},[t("el-table-column",{key:"1",attrs:{prop:"id",sortable:"custom",label:"Blind box ID",align:"center"}}),t("el-table-column",{key:"2",attrs:{prop:"boxImg",label:"Blind box picture",width:"120px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[t("div",{staticStyle:{width:"100px",height:"100px"}},[t("el-image",{staticStyle:{height:"100%"},attrs:{src:e.row.boxImg,"preview-src-list":[e.row.boxImg]}})],1)]}}])}),t("el-table-column",{key:"3",attrs:{prop:"boxName",width:"120",label:"Blind Box Name",align:"center"}}),t("el-table-column",{key:"4",attrs:{prop:"boxIndex",sortable:"custom",label:"Recommendation order",align:"center"}}),t("el-table-column",{key:"5",attrs:{prop:"nftTotalNumber",label:"Weights",align:"center"}}),t("el-table-column",{key:"6",attrs:{prop:"price",sortable:"custom",label:"unit price",align:"center"}}),t("el-table-column",{key:"7",attrs:{prop:"fivePrice",sortable:"custom",label:"Five consecutive prices",align:"center"}}),t("el-table-column",{key:"8",attrs:{prop:"tenPrice",sortable:"custom",label:"Ten consecutive price",align:"center"}}),t("el-table-column",{key:"9",attrs:{prop:"totalWeight",sortable:"custom",label:"Total weight",align:"center"}}),t("el-table-column",{key:"10",attrs:{prop:"sales",width:"100",sortable:"custom",label:"Sales volume",align:"center"}}),t("el-table-column",{key:"12",attrs:{prop:"grossIncome",sortable:"custom",width:"100",label:"Total income (".concat(e.coin,")"),align:"center"}}),t("el-table-column",{key:"13",attrs:{prop:"totalOpenNftPrice",sortable:"custom",width:"100",label:"Total expenditure (".concat(e.coin,")"),align:"center"}}),t("el-table-column",{key:"14",attrs:{prop:"totalExpenditure",sortable:"custom",width:"120",label:"Actual return (".concat(e.coin,")"),align:"center"}}),t("el-table-column",{key:"15",attrs:{prop:"totalProfit",width:"100",sortable:"custom",label:"Total profit (".concat(e.coin,")"),align:"center"}}),t("el-table-column",{key:"16",attrs:{prop:"realRate",width:"100",sortable:"custom",label:"Actual return rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(e.accurateDecimal(new e.bigNumber(t.row.realRate||0).multipliedBy(100),4),"%"))+" ")]}}])}),t("el-table-column",{key:"17",attrs:{prop:"deviseRate",width:"100",sortable:"custom",label:"Design return rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(e.accurateDecimal(new e.bigNumber(t.row.deviseRate||0).multipliedBy(100),4),"%"))+" ")]}}])}),t("el-table-column",{key:"18",attrs:{prop:"reduceThreshold",width:"100",sortable:"custom",label:"Blind box attenuation rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!=t.row.reduceThreshold&&""!==t.row.reduceThreshold?"".concat(e.accurateDecimal(new e.bigNumber(t.row.reduceThreshold).multipliedBy(100),4),"%"):"--")+" ")]}}])}),t("el-table-column",{key:"19",attrs:{prop:"adjust",width:"100",sortable:"custom",label:"Winning correction",align:"center"}}),t("el-table-column",{key:"20",attrs:{prop:"adjustRate",width:"100",sortable:"custom",label:"Correct the return rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(e.accurateDecimal(new e.bigNumber(t.row.adjustRate||0).multipliedBy(100),4),"%"))+" ")]}}])}),t("el-table-column",{key:"21",attrs:{prop:"expectRate",width:"100",sortable:"custom",label:"Expecting return rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(e.accurateDecimal(new e.bigNumber(t.row.expectRate||0).multipliedBy(100),4),"%"))+" ")]}}])}),t("el-table-column",{key:"22",attrs:{prop:"externalStatus",sortable:"custom",label:"External abnormalities",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return["NUMBER"==r.row.externalStatus?t("span",{staticStyle:{color:"#ec5706"}},[e._v("Insufficient quantity")]):t("span",{staticStyle:{color:"#21ae04"}},[e._v("normal")])]}}])}),t("el-table-column",{key:"23",attrs:{prop:"bloodPoolsStatus",sortable:"custom",label:"Blood pool switch",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return["FALSE"==r.row.bloodPoolsStatus?t("span",{staticStyle:{color:"#ec5706"}},[e._v("closure")]):t("span",{staticStyle:{color:"#21ae04"}},[e._v("normal")])]}}])}),t("el-table-column",{key:"24",attrs:{prop:"bloodPoolsStatus",sortable:"custom",label:"Is it a fake blind box",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s("TRUE"==r.row.indexShowStatus?"yes":"no"))])]}}])}),t("el-table-column",{key:"25",attrs:{prop:"boxStatus",sortable:"custom",label:"state",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return["DISABLE"==r.row.boxStatus?t("span",{staticStyle:{color:"#ec5706"}},[e._v("freeze")]):t("span",{staticStyle:{color:"#21ae04"}},[e._v("normal")])]}}])}),t("el-table-column",{key:"26",attrs:{prop:"id",label:"operate",align:"center",width:"110",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return e.onEbit(r.row)}}},[e._v(" edit ")]),t("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return e.operatingNft(r.row)}}},[e._v(" "+e._s("DISABLE"==r.row.boxStatus?"Ban":"freeze")+" ")]),t("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return e.handleDel(r.row)}}},[e._v(" delete ")])]}}])})],1),e.baseUserPage&&e.baseUserPage.total?t("el-pagination",{staticClass:"public-pagination",attrs:{background:"","current-page":e.page,"page-sizes":e.pagination.pageSizes,"page-size":e.size,layout:" sizes, prev, pager, next, jumper",total:e.baseUserPage.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),t("el-dialog",{attrs:{title:1==e.operatingType?"New blindEdit Blind Box":"Edit Blind Box",visible:e.showDialog,width:"1200px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}}},[t("div",{staticClass:"box-setting"},[t("el-form",{ref:"ruleForm",staticStyle:{width:"420px"},attrs:{rules:e.rules,model:e.ruleForm,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"Is it a fake blind box"}},[t("el-switch",{attrs:{"active-value":"TRUE","inactive-value":"FALSE","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.ruleForm.indexShowStatus,callback:function(t){e.$set(e.ruleForm,"indexShowStatus",t)},expression:"ruleForm.indexShowStatus"}})],1),t("el-form-item",{attrs:{label:"Blind Box Name",prop:"boxName"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"Please enter the name of the blind box"},model:{value:e.ruleForm.boxName,callback:function(t){e.$set(e.ruleForm,"boxName",t)},expression:"ruleForm.boxName"}})],1),t("el-form-item",{attrs:{label:"Blind box picture",prop:"seriesImg"}},[t("el-upload",{class:{hide:e.hideUpload},attrs:{action:e.uploadUrl,"on-change":e.handleChange,"on-success":e.handleUpload,"file-list":e.fileImg,multiple:!1,limit:e.limitCount,accept:"image/png,image/jpg,image/jpeg,image/svg+xml,image/gif,image/webp","list-type":"picture-card","before-upload":e.handleBefore,"on-remove":e.handleRemove,"on-exceed":e.handExceed,headers:e.uploadHeader}},[t("i",{staticClass:"el-icon-plus"})])],1),t("el-form-item",{attrs:{label:"H5 blind box picture",prop:"seriesImg"}},[t("div",{staticClass:"flex"},[t("el-upload",{class:{hide:e.hideUploadOne},attrs:{action:e.uploadUrl,"on-change":e.handleChangeOne,"on-success":e.handleUploadOne,"file-list":e.fileImgOne,multiple:!1,limit:e.limitCount,accept:"image/png,image/jpg,image/jpeg,image/svg+xml,image/gif,image/webp","list-type":"picture-card","before-upload":e.handleBefore,"on-remove":e.handleRemoveOne,"on-exceed":e.handExceed,headers:e.uploadHeader}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticClass:"tip"},[e._v("logo")])]),t("el-upload",{class:{hide:e.hideUploadTwo},attrs:{action:e.uploadUrl,"on-change":e.handleChangeTwo,"on-success":e.handleUploadTwo,"file-list":e.fileImgTwo,multiple:!1,limit:e.limitCount,accept:"image/png,image/jpg,image/jpeg,image/svg+xml,image/gif,image/webp","list-type":"picture-card","before-upload":e.handleBefore,"on-remove":e.handleRemoveTwo,"on-exceed":e.handExceed,headers:e.uploadHeader}},[t("i",{staticClass:"el-icon-plus"}),t("div",{staticClass:"tip"},[e._v("CD")])])],1)]),t("el-form-item",{attrs:{label:"Recommendation order",prop:"boxIndex"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the recommended sequence"},model:{value:e.ruleForm.boxIndex,callback:function(t){e.$set(e.ruleForm,"boxIndex",e._n(t))},expression:"ruleForm.boxIndex"}})],1),t("el-form-item",{attrs:{label:"unit price",prop:"price"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the unit price"},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1),t("el-form-item",{attrs:{label:"Five -company unit price",prop:"fivePrice"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the five -way unit price"},model:{value:e.ruleForm.fivePrice,callback:function(t){e.$set(e.ruleForm,"fivePrice",t)},expression:"ruleForm.fivePrice"}})],1),t("el-form-item",{attrs:{label:"Ten consecutive unit price",prop:"tenPrice"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter ten consecutive unit prices"},model:{value:e.ruleForm.tenPrice,callback:function(t){e.$set(e.ruleForm,"tenPrice",t)},expression:"ruleForm.tenPrice"}})],1),t("el-form-item",{attrs:{label:"Design return rate",prop:"deviseRate"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the design return rate"},model:{value:e.ruleForm.deviseRate,callback:function(t){e.$set(e.ruleForm,"deviseRate",t)},expression:"ruleForm.deviseRate"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),t("el-form-item",{attrs:{label:"NFT price limit",prop:"reduceThreshold"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the NFT price limit"},model:{value:e.ruleForm.reduceThreshold,callback:function(t){e.$set(e.ruleForm,"reduceThreshold",t)},expression:"ruleForm.reduceThreshold"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),t("el-form-item",{attrs:{label:"Number of legends",prop:"legendNum"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the number of legends"},model:{value:e.ruleForm.legendNum,callback:function(t){e.$set(e.ruleForm,"legendNum",t)},expression:"ruleForm.legendNum"}},[t("template",{slot:"append"},[e._v(" "+e._s("probability".concat(new e.bigNumber(e.legendNftProbability||0).multipliedBy(100).toFixed(4),"% "))+" ")])],2)],1),t("el-form-item",{attrs:{label:"Number of epic",prop:"epicNum"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the number of poems"},model:{value:e.ruleForm.epicNum,callback:function(t){e.$set(e.ruleForm,"epicNum",t)},expression:"ruleForm.epicNum"}},[t("template",{slot:"append"},[e._v(" "+e._s("probability".concat(new e.bigNumber(e.epicNftProbability||0).multipliedBy(100).toFixed(4),"% "))+" ")])],2)],1),t("el-form-item",{attrs:{label:"Rare quantity",prop:"rareNum"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the rare quantity"},model:{value:e.ruleForm.rareNum,callback:function(t){e.$set(e.ruleForm,"rareNum",t)},expression:"ruleForm.rareNum"}},[t("template",{slot:"append"},[e._v(" "+e._s("probability".concat(new e.bigNumber(e.rareNftProbability||0).multipliedBy(100).toFixed(4),"% "))+" ")])],2)],1),t("el-form-item",{attrs:{label:"Ordinary quantity"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",readonly:"readonly",placeholder:"Ordinary quantity"},model:{value:e.commonNum,callback:function(t){e.commonNum=t},expression:"commonNum"}},[t("template",{slot:"append"},[e._v(" "+e._s("probability".concat(new e.bigNumber(e.commonNftProbability||0).multipliedBy(100).toFixed(4),"% "))+" ")])],2)],1),t("el-form-item",{attrs:{label:"Blind Box Description",prop:"boxDesc"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:4},placeholder:"Please enter the description"},model:{value:e.ruleForm.boxDesc,callback:function(t){e.$set(e.ruleForm,"boxDesc",t)},expression:"ruleForm.boxDesc"}})],1),t("div",{staticClass:"blood_pool"},[t("div",{staticClass:"blood_pool_item"},[t("div",{staticClass:"blood_pool_item_l"},[e._v(" "+e._s("Consumption:".concat(e.bloodPool&&e.bloodPool.grossIncome||0))+" ")]),t("div",{staticClass:"blood_pool_item_r"},[t("span",[e._v("Blood pool switch:")]),t("el-switch",{attrs:{"active-value":"TRUE","inactive-value":"FALSE","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.calculationPlatformNft},model:{value:e.bloodPool.bloodPoolsStatus,callback:function(t){e.$set(e.bloodPool,"bloodPoolsStatus",t)},expression:"bloodPool.bloodPoolsStatus"}})],1)]),t("div",{staticClass:"blood_pool_item"},[t("div",{staticClass:"blood_pool_item_l"},[e._v(" "+e._s("Return prize:".concat(e.bloodPool&&e.bloodPool.totalOpenNftPrice||0))+" ")]),t("div",{staticClass:"blood_pool_item_r"},[t("span",[e._v("Correct value:")]),t("el-input",{staticStyle:{flex:"1"},attrs:{type:"number"},model:{value:e.bloodPool.adjust,callback:function(t){e.$set(e.bloodPool,"adjust",t)},expression:"bloodPool.adjust"}})],1)]),t("div",{staticClass:"blood_pool_item"},[t("span",[e._v("Correct value for compulsory update snapshot threshold:")]),t("el-input",{staticStyle:{flex:"1"},attrs:{type:"number"},model:{value:e.bloodPool.adjustCompulsionUpdateThreshold,callback:function(t){e.$set(e.bloodPool,"adjustCompulsionUpdateThreshold",t)},expression:"bloodPool.adjustCompulsionUpdateThreshold"}},[t("template",{slot:"append"},[e._v("%")])],2)],1),t("div",{staticClass:"blood_pool_item"},[t("div",{staticClass:"blood_pool_item_l"},[e._v(" "+e._s("Actual return rate:".concat(e.accurateDecimal(new e.bigNumber(e.bloodPool.realRate||0).multipliedBy(100),4),"%"))+" ")]),t("div",{staticClass:"blood_pool_item_r"},[e._v(" "+e._s("Correct the return rate:".concat(e.accurateDecimal(new e.bigNumber(e.bloodPool.adjustRate||0).multipliedBy(100),4),"%"))+" ")])])])],1),t("div",{staticClass:"nft-box"},[t("div",{staticClass:"external-nft nft-item"},[t("div",{staticClass:"operating-box"},[t("div",{staticClass:"title"},[e._v("External NFT configuration")]),t("div",{staticClass:"btn"},[t("div",{staticClass:"add",on:{click:function(t){return e.addSeries(1)}}},[e._v("Add to")])])]),t("el-table",{staticClass:"public-table",staticStyle:{"min-width":"0"},attrs:{data:e.externalList}},[t("el-table-column",{key:"1",attrs:{prop:"seriesName",label:"series",align:"center","show-overflow-tooltip":""}}),t("el-table-column",{key:"2",attrs:{prop:"chain",label:"chain",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.chainFormat(t.row.chain||t.row.chainId))+" ")]}}])}),t("el-table-column",{key:"3",attrs:{prop:"number",label:"Expected quantity",width:"140px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticClass:"number-box"},[t("el-input",{staticClass:"number",attrs:{type:"number"},model:{value:r.row.number,callback:function(t){e.$set(r.row,"number",e._n(t))},expression:"scope.row.number"}}),r.row.totalNumber&&Number(r.row.totalNumber||0)<Number(r.row.number||0)&&"NFT"==r.row.type?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"This NFT can only be set at the current maximum setting".concat(r.row.totalNumber,"个"),placement:"top-start"}},[t("i",{staticClass:"icon-warning el-icon-warning-outline"})]):e._e(),r.row.dwindleNumber?t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"".concat(r.row.dwindleNumber,"One NFT exceeds the threshold"),placement:"top-start"}},[t("i",{staticClass:"icon-warning icon-warning-color el-icon-warning-outline"})]):e._e()],1)]}}])}),t("el-table-column",{key:"4",attrs:{prop:"realNumber",label:"the actual amount",width:"120px",align:"center"}}),e.calculationNft.length>0?t("el-table-column",{key:"5",attrs:{prop:"floorPrice",label:"Average price",align:"center"}}):t("el-table-column",{key:"6",attrs:{prop:"floorPrice",label:"Floor price",align:"center"}}),t("el-table-column",{key:"7",attrs:{prop:"boxImg",label:"General price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new e.bigNumber(t.row.floorPrice).multipliedBy(t.row.number||0).toFixed(4))+" ")]}}])}),t("el-table-column",{key:"8",attrs:{label:"probability",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.probability(t.row,1))+" ")]}}])}),t("el-table-column",{key:"9",attrs:{align:"center",width:"60",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("img",{staticStyle:{width:"24px",cursor:"pointer"},attrs:{src:r("4e57")},on:{click:function(t){return e.handleNftDel(a.row,a.$index,1)}}})]}}])})],1)],1),t("div",{staticClass:"external-nft nft-item"},[t("div",{staticClass:"operating-box"},[t("div",{staticClass:"title"},[e._v("Internal NFT configuration")]),t("div",{staticClass:"btn"},[t("img",{attrs:{src:r("37f6")},on:{click:function(t){return e.calculationPlatformNft()}}}),t("div",{staticClass:"add",on:{click:function(t){return e.addSeries(2)}}},[e._v("Add to")])])]),t("el-table",{staticClass:"public-table",staticStyle:{"min-width":"0"},attrs:{data:e.platformList}},[t("el-table-column",{key:"1",attrs:{prop:"id",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{display:"flex","align-items":"center"}},["TRUE"==a.row.baseStatus?t("img",{attrs:{src:r("25c1"),alt:""}}):t("img",{attrs:{src:r("a05a"),alt:""},on:{click:function(t){return e.onEbitNft(a.row)}}})])]}}])}),t("el-table-column",{key:"2",attrs:{prop:"seriesName",label:"series",align:"center"}}),t("el-table-column",{key:"3",attrs:{prop:"price",label:"unit price",align:"center"}}),t("el-table-column",{key:"4",attrs:{prop:"multipleRate",label:"Benchmark coefficient",align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return["TRUE"!=r.row.baseStatus?t("div",{staticClass:"number-box"},[t("el-input",{staticClass:"number",attrs:{type:"number"},model:{value:r.row.multipleRate,callback:function(t){e.$set(r.row,"multipleRate",t)},expression:"scope.row.multipleRate"}})],1):t("div",[e._v(e._s(r.row.multipleRate))])]}}])}),t("el-table-column",{key:"5",attrs:{prop:"number",label:"quantity",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.ruleForm.innerBaseNumber&&Math.ceil(Number(new e.bigNumber(e.ruleForm.innerBaseNumber||0).multipliedBy(t.row.multipleRate||0)))||"--")+" ")]}}])}),t("el-table-column",{key:"6",attrs:{label:"General price",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(new e.bigNumber(t.row.price).multipliedBy(Math.ceil(Number(new e.bigNumber(e.ruleForm.innerBaseNumber||1).multipliedBy(t.row.multipleRate||0)))).toFixed(4))+" ")]}}])}),t("el-table-column",{key:"7",attrs:{label:"probability",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.probability(t.row,2))+" ")]}}])}),t("el-table-column",{key:"20",attrs:{prop:"id",align:"center",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("img",{staticStyle:{width:"24px",cursor:"pointer"},attrs:{src:r("4e57")},on:{click:function(t){return e.handleNftDel(a.row,a.$index,2)}}})]}}])})],1)],1),t("div",{staticClass:"probability-box"},[t("div",[e._v(" "+e._s(e.ruleForm.expectRate&&"It is expected to return the rate:".concat(new e.bigNumber(e.ruleForm.expectRate||0).multipliedBy(100).toFixed(4),"% "))+" ")]),t("div",[e._v(" "+e._s(e.ruleForm.lossRate&&"Subjoin rate:".concat(new e.bigNumber(e.ruleForm.lossRate||0).multipliedBy(100).toFixed(4),"% "))+" ")])])])],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("Sure")])],1),t("el-dialog",{attrs:{width:"440px","close-on-click-modal":!1,title:1==e.seriesType?"Choose an external NFT":"Choose an internal NFT",visible:e.showSeriesDialog,"append-to-body":"","before-close":e.handleSeriesClose},on:{"update:visible":function(t){e.showSeriesDialog=t}}},[t("el-form",{ref:"seriesForm",staticClass:"add-form",attrs:{model:e.seriesForm,"label-width":"80px"}},[2==e.seriesType?t("div",{staticClass:"benchmark-obx"},[!e.platformList.length>0?t("img",{attrs:{src:r("25c1"),alt:"",srcset:""}}):"TRUE"==e.seriesForm.baseStatus?t("img",{attrs:{src:r("25c1"),alt:"",srcset:""},on:{click:function(t){e.seriesForm.baseStatus="FALSE"}}}):t("img",{attrs:{src:r("a05a"),alt:"",srcset:""},on:{click:function(t){e.seriesForm.baseStatus="TRUE"}}}),t("span",[e._v("Benchmark NFT")])]):e._e(),1==e.seriesType?t("el-form-item",{attrs:{label:"type",prop:"adjust"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{"popper-class":"public-select-box",placeholder:"please choose"},on:{change:e.selectChain},model:{value:e.seriesForm.type,callback:function(t){e.$set(e.seriesForm,"type",t)},expression:"seriesForm.type"}},e._l(e.typeOptions,(function(e,r){return t("el-option",{key:r,attrs:{label:e.label,value:e.value}})})),1)],1):e._e(),1==e.seriesType?t("el-form-item",{attrs:{label:"Choice chain",prop:"adjust"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{"popper-class":"public-select-box",placeholder:"please choose"},on:{change:e.selectChain},model:{value:e.seriesForm.chain,callback:function(t){e.$set(e.seriesForm,"chain",t)},expression:"seriesForm.chain"}},e._l(e.chainList,(function(e,r){return t("el-option",{key:r,attrs:{label:e.chainName,value:e.chainId}})})),1)],1):e._e(),t("el-form-item",{attrs:{label:"Select a series",prop:"adjust"}},[t("el-select",{staticStyle:{width:"300px"},attrs:{"popper-class":"public-select-box",placeholder:"please choose",clearable:""},on:{change:e.changeSeries},model:{value:e.seriesForm.seriesId,callback:function(t){e.$set(e.seriesForm,"seriesId",t)},expression:"seriesForm.seriesId"}},[e._l(e.downNft,(function(r,a){return[e.seriesIdIncludes(r.id)?e._e():t("el-option",{key:a,attrs:{label:r.seriesName,value:r.id}},[t("span",{staticStyle:{float:"left"}},[e._v(e._s(r.seriesName))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"12px"}},[e._v(e._s(r.floorPrice))]),t("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"12px"}},[e._v(e._s(r.price))])])]}))],2)],1),1==e.seriesType?t("el-form-item",{attrs:{label:"NFT"==e.seriesForm.type?"Floor price":"value",prop:"adjust"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",readonly:""},model:{value:e.seriesForm.floorPrice,callback:function(t){e.$set(e.seriesForm,"floorPrice",t)},expression:"seriesForm.floorPrice"}},[t("template",{slot:"append"},[e._v(e._s(e.priceCoin))])],2)],1):e._e(),2==e.seriesType?t("el-form-item",{attrs:{label:"unit price",prop:"adjust"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",readonly:""},model:{value:e.seriesForm.price,callback:function(t){e.$set(e.seriesForm,"price",t)},expression:"seriesForm.price"}},[t("template",{slot:"append"},[e._v(e._s(e.priceCoin))])],2)],1):e._e()],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleSeriesClose()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.pushSeries()}}},[e._v("Sure")])],1)],1)],1)],1)},i=[],s=r("ade3"),n=r("c7eb"),o=r("5530"),c=r("1da1"),u=(r("d9e2"),r("99af4"),r("7db0"),r("c740"),r("14d9"),r("fb6a"),r("a434"),r("d3b7"),r("159b"),r("901e")),d=r.n(u),m=r("ed08"),p=r("1b80"),b=r("51be"),h=r("0acd"),f={name:"BlindBoxManagement",components:{},data:function(){return{Id:null,boxName:null,externalStatus:null,boxStatus:null,sortData:{orderBy:null,orderType:null},page:1,size:20,tableData:[],baseUserPage:null,aggregateQuery:{},showDialog:!1,operatingType:1,uploadUrl:"",limitCount:1,hideUpload:!1,hideUploadOne:!1,hideUploadTwo:!1,uploadHeader:{certificate:sessionStorage.getItem("token")},fileImg:[{url:"https://www.bitzing.io/prd/mystery/IMAGE/8945f0a4b909442395d48718c335a9a8.webp"}],fileImgOne:[],fileImgTwo:[],ruleForm:{boxName:null,boxImg:"https://www.bitzing.io/prd/mystery/IMAGE/8945f0a4b909442395d48718c335a9a8.webp",boxIndex:null,price:null,coin:"ETH",fivePrice:null,tenPrice:null,deviseRate:null,reduceThreshold:null,legendNum:null,epicNum:null,rareNum:null,boxDesc:null,platformList:[],externalList:[],expectRate:null,lossRate:null,innerBaseNumber:null,indexShowStatus:"FALSE"},bloodPool:{grossIncome:0,totalOpenNftPrice:0,bloodPoolsStatus:"FALSE",adjust:null,adjustCompulsionUpdateThreshold:null,realRate:null,adjustRate:null},chainList:h["a"],rules:{},externalData:[],externalCoinData:[],platformData:[],externalList:[],platformList:[],showSeriesDialog:!1,seriesType:1,seriesForm:{nftType:null,chain:null,seriesId:null,seriesName:null,floorPrice:null,price:null,multipleRate:null,baseStatus:"FALSE",number:null},downNft:null,calculationNft:[],typeOptions:[{label:"NFT",value:"NFT"},{label:"ETH",value:"ETH"}],priceCoin:"ETH"}},mixins:[p["a"]],methods:(a={bigNumber:d.a,accurateDecimal:m["a"],timeForStr:m["h"],seriesIdIncludes:function(e){return 1==this.seriesType?this.externalList.some((function(t){return t.seriesId===e})):this.platformList.some((function(t){return t.seriesId===e}))},handleUpload:function(e){200!=e.status?this.$message.error("upload failed"):this.fileImg.push({url:e.data})},handleBefore:function(e){var t=this,r=e.size/1024/1024<2;return r||t.$message.error("The picture is too large, the file size is small and small is less than 2M"),r},handleRemove:function(e,t){this.fileImg=[]},handExceed:function(e){this.$message.error("Banner picture can only be uploaded")},submitCofirm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(c["a"])(Object(n["a"])().mark((function t(r){var a,l;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=21;break}if(0!=e.fileImg.length){t.next=4;break}return e.$message.error("Please upload the picture!"),t.abrupt("return");case 4:if(a=Object(o["a"])({},e.ruleForm),a.imageUrl=e.fileImg[0].url,l=null,!e.ruleForm.id){t.next=14;break}return t.next=10,e.$http.updateBanner(Object(o["a"])({},a));case 10:l=t.sent,e.$router.go(-1),t.next=18;break;case 14:return t.next=16,e.$http.saveBanner(Object(o["a"])({},a));case 16:l=t.sent,e.$router.go(-1);case 18:l&&(e.$refs["ruleForm"].resetFields(),e.$message.success("操作成功！"),e.fileImg=[]),t.next=23;break;case 21:return console.log("error submit!!"),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},searchFun:function(){return{id:this.Id,boxName:this.boxName,externalStatus:this.externalStatus,boxStatus:this.boxStatus}},sortChange:function(e){e.column;var t=e.prop,r=e.order;this.sortData.orderBy=t,this.sortData.orderType="descending"==r?"DESC":"ASC",r||(this.sortData.orderType=null),this.fetchBoxManagerList()},fetchBoxManagerList:function(){var e=arguments,t=this;return Object(c["a"])(Object(n["a"])().mark((function r(){var a,l,i,s,c,u,d,m,p,b;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=!(e.length>0&&void 0!==e[0])||e[0],l=t.searchFun(),i=t.sortData,s=t.size,c=t.coin,u=t.userType,d=t.page,a&&(t.page=1,d=1),m=Object(o["a"])(Object(o["a"])(Object(o["a"])({},{coin:c,userType:u,size:s,page:d}),i),l),r.next=8,t.$http.getBoxManagerList(m);case 8:return p=r.sent,p&&(t.baseUserPage=p,t.tableData=p.records),delete m.size,delete m.page,r.next=14,t.$http.getBoxManagerStatistics(m);case 14:b=r.sent,b&&(t.aggregateQuery=b);case 16:case"end":return r.stop()}}),r)})))()},getExternalCoinFunc:function(){var e=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var r,a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={size:999,page:1,coinName:e.seriesForm.type,chainId:e.seriesForm.chain},t.next=3,e.$http.externalCoinPageList(r);case 3:a=t.sent,a&&(e.downNft=a.records,e.externalCoinData=a.records);case 5:case"end":return t.stop()}}),t)})))()},fetchNftExternalList:function(){var e=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var r,a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={chainId:e.seriesForm.chain,coin:e.coin,userType:e.userType,page:1,size:999},t.next=3,e.$http.getNftExternalList(r);case 3:a=t.sent,a&&(e.downNft=a.records,e.externalData=a.records);case 5:case"end":return t.stop()}}),t)})))()},fetchNftPlatformList:function(){var e=this;return Object(c["a"])(Object(n["a"])().mark((function t(){var r,a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={coin:e.coin,userType:e.userType,page:1,size:999},t.next=3,e.$http.getNftPlatformList(r);case 3:a=t.sent,a&&(e.downNft=a.records,e.platformData=a.records);case 5:case"end":return t.stop()}}),t)})))()},operatingNft:function(e){var t=this;this.$confirm("Are you ".concat(" Disable "==e.boxstatus?" Open ":" Close ",'" ').concat(e.boxname||e.id,'"?'),{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(c["a"])(Object(n["a"])().mark((function r(){var a;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=null,"DISABLE"!=e.boxStatus){r.next=7;break}return r.next=4,t.$http.boxManagerThaw({id:e.id});case 4:a=r.sent,r.next=10;break;case 7:return r.next=9,t.$http.boxManagerFreeze({id:e.id});case 9:a=r.sent;case 10:a&&(t.fetchBoxManagerList(),t.$message.success("Successful operation"));case 11:case"end":return r.stop()}}),r)})))).catch((function(e){console.error(e)}))},handleDel:function(e){var t=this;this.$confirm('Are you sure you want to delete the blind box "'.concat(e.boxname||e.id,'"?'),"hint",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(c["a"])(Object(n["a"])().mark((function r(){var a;return Object(n["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$http.boxManagerDelete({id:e.id});case 2:a=r.sent,a&&(t.fetchBoxManagerList(),t.$message.success("Successful operation"));case 4:case"end":return r.stop()}}),r)})))).catch((function(e){console.error(e)}))},actualReturn:function(e){var t=e.totalExpenditure,r=e.adjust,a=e.grossIncome,l=new d.a(t||0).plus(r);return a?new d.a(l||0).dividedBy(a):0},paybackRate:function(e){var t=e.expectRate,r=new d.a(t||0).multipliedBy(t),a=this.actualReturn(e);return a?new d.a(r||0).dividedBy(a):0},addBox:function(){this.showDialog=!0,this.operatingType=1},onEbit:function(e){var t=this;this.ruleForm=Object(o["a"])(Object(o["a"])(Object(o["a"])({},this.ruleForm),e),{},{deviseRate:new d.a(e.deviseRate).multipliedBy(100).toFixed(4),reduceThreshold:null!=e.reduceThreshold&&""!==e.reduceThreshold?new d.a(e.reduceThreshold).multipliedBy(100).toFixed(4):null}),this.operatingType=2,this.hideUpload=!0,this.hideUploadOne=!!e.showImgOne,this.hideUploadTwo=!!e.showImgTwo,this.fileImg=[{url:e.boxImg}],this.fileImgOne=e.showImgOne?[{url:e.showImgOne}]:[],this.fileImgTwo=e.showImgTwo?[{url:e.showImgTwo}]:[];var r=e.platformList,a=e.externalList,l=e.externalCoinList;this.bloodPool={grossIncome:e.grossIncome,totalOpenNftPrice:e.totalOpenNftPrice,bloodPoolsStatus:e.bloodPoolsStatus,adjust:e.adjust,adjustCompulsionUpdateThreshold:Object(m["a"])(new d.a(e.adjustCompulsionUpdateThreshold||0).multipliedBy(100),4),realRate:e.realRate,adjustRate:e.adjustRate};for(var i=function(e){"TRUE"==r[e].baseStatus&&(t.ruleForm.innerBaseNumber=r[e].nftNum||0),t.platformData.forEach((function(a){r[e].seriesId==a.id&&t.platformList.push(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},t.seriesForm),{},{nftType:"PLATFORM"},r[e]),a),{},{floorPrice:a.floorPrice||null,price:a.price||null,seriesName:a.seriesName||null}))}))},s=0;s<r.length;s++)i(s);for(var n=function(e){t.externalData.forEach((function(r){a[e].seriesId==r.id&&t.externalList.push(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({type:"NFT"},t.seriesForm),{},{nftType:"EXTERNAL"},a[e]),r),{},{floorPrice:r.floorPrice||null,price:r.price||null,seriesName:r.seriesName||null,number:a[e].nftNum||null}))}))},c=0;c<a.length;c++)n(c);for(var u=function(e){t.externalCoinData.forEach((function(r){l[e].seriesId==r.id&&t.externalList.push(Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({type:"ETH"},t.seriesForm),{},{nftType:"EXTERNAL"},l[e]),r),{},{floorPrice:r.price||null,price:r.price||null,seriesName:r.seriesName||null,number:l[e].nftNum||null}))}))},p=0;p<l.length;p++)u(p);this.$forceUpdate(),this.showDialog=!0,setTimeout((function(){t.calculationPlatformNft()}),10)}},Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(a,"handleUpload",(function(e){if(200==e.code)return this.fileImg.push({url:e.data}),void(this.ruleForm.boxImg=e.data);this.$message.error("upload failed")})),"handleBefore",(function(e){var t=this,r=e.size/1024/1024<2;return r||t.$message.error("The file is too large, and the file size is less than 2M"),r})),"handleChange",(function(e,t){this.hideUpload=t.length>=this.limitCount})),"handleRemove",(function(e,t){this.hideUpload=t.length>=this.limitCount,this.fileImg=[]})),"handExceed",(function(e){this.$message.error("File can only upload one")})),"handleUploadOne",(function(e){if(200==e.code)return this.fileImgOne.push({url:e.data}),void(this.ruleForm.showImgOne=e.data);this.$message.error("upload failed")})),"handleChangeOne",(function(e,t){this.hideUploadOne=t.length>=this.limitCount})),"handleRemoveOne",(function(e,t){this.hideUploadOne=t.length>=this.limitCount,this.fileImgOne=[],this.ruleForm.showImgOne=""})),"handleUploadTwo",(function(e){if(200==e.code)return this.fileImgTwo.push({url:e.data}),void(this.ruleForm.showImgTwo=e.data);this.$message.error("upload failed")})),"handleChangeTwo",(function(e,t){this.hideUploadTwo=t.length>=this.limitCount})),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(a,"handleRemoveTwo",(function(e,t){this.hideUploadTwo=t.length>=this.limitCount,this.fileImgTwo=[],this.ruleForm.showImgTwo=""})),"submitForm",(function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(c["a"])(Object(n["a"])().mark((function t(r){var a,l,i,s,c,u,p,b,h,f,g;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=43;break}if(a=e.ruleForm.innerBaseNumber,l=e.bloodPool,i=e.fileImg,s=e.platformList,c=e.externalList,u=e.calculationNft,0!=i.length){t.next=5;break}return e.$message.error("Please upload a blind box picture!"),t.abrupt("return");case 5:if(!(!s.length>0)){t.next=8;break}return e.$message.error("Please select the internal NFT!"),t.abrupt("return");case 8:if(!(!c.length>0)){t.next=11;break}return e.$message.error("Please select the external NFT!"),t.abrupt("return");case 11:if(!(!u.length>0)){t.next=14;break}return e.$message.error("If the internal NFT benchmark data is not calculated, please replenish it after the completeness"),t.abrupt("return");case 14:if(a||!(a>0)){t.next=17;break}return e.$message.error("The internal NFT reference data cannot be negative, please correct it and try again"),t.abrupt("return");case 17:p=[],b=[],h=[],t.prev=20,c.forEach((function(e){if(Number(e.totalNumber)<Number(e.number)&&"NFT"==e.type&&console.log("The maximum number is wrong"),!e.number||Number(e.number)<=0)throw console.log("Empty quantity"),new Error("error");"NFT"==e.type?b.push({seriesId:e.seriesId,nftNum:e.number}):h.push({seriesId:e.seriesId,nftNum:e.number})})),t.next=28;break;case 24:return t.prev=24,t.t0=t["catch"](20),e.$message.error("The number of external NFT series is incorrect, please replenish it after the completeness"),t.abrupt("return");case 28:if(s.forEach((function(e){p.push({seriesId:e.seriesId,multipleRate:e.multipleRate,baseStatus:e.baseStatus})})),f=Object(o["a"])(Object(o["a"])({},e.ruleForm),{},{adjust:l.adjust,bloodPoolsStatus:l.bloodPoolsStatus,adjustCompulsionUpdateThreshold:Object(m["a"])(new d.a(l.adjustCompulsionUpdateThreshold||0).dividedBy(100),4),coin:e.coin,deviseRate:Object(m["a"])(new d.a(e.ruleForm.deviseRate).dividedBy(100),6),reduceThreshold:null!=e.ruleForm.reduceThreshold&&""!==e.ruleForm.reduceThreshold?Object(m["a"])(new d.a(e.ruleForm.reduceThreshold).dividedBy(100),6):null,platformList:p,externalList:b,externalCoinList:h}),g=null,e.ruleForm.id){t.next=37;break}return t.next=34,e.$http.boxManagerAdd(Object(o["a"])({},f));case 34:g=t.sent,t.next=40;break;case 37:return t.next=39,e.$http.boxManagerUpdate(Object(o["a"])({},f));case 39:g=t.sent;case 40:g&&(e.$message.success("Successful operation"),e.handleClose(),e.fetchBoxManagerList()),t.next=45;break;case 43:return console.log("error submit!!"),t.abrupt("return",!1);case 45:case"end":return t.stop()}}),t,null,[[20,24]])})));return function(e){return t.apply(this,arguments)}}())})),"onEbitNft",(function(e){for(var t=0;t<this.platformList.length;t++)this.platformList[t].seriesId==e.seriesId?(this.platformList[t].baseStatus="TRUE",this.platformList[t].multipleRate=1):this.platformList[t].baseStatus="FALSE";this.$forceUpdate()})),"addSeries",(function(e){this.seriesType=e,!this.platformList.length>0&&(this.seriesForm.baseStatus="TRUE"),1==this.seriesType?(this.searchFun.nftType="EXTERNAL",this.fetchNftExternalList()):(this.searchFun.nftType="PLATFORM",this.fetchNftPlatformList()),this.showSeriesDialog=!0})),"selectChain",(function(){"NFT"==this.seriesForm.type?this.fetchNftExternalList():this.getExternalCoinFunc(),this.seriesForm.seriesId=""})),"changeSeries",(function(e){var t=this.downNft.find((function(t){return t.id==e}));this.seriesForm.floorPrice=t&&t.floorPrice||null,this.seriesForm.price=t&&t.price||null,this.seriesForm.seriesName=t&&t.seriesName||null,"NFT"!=this.seriesForm.type&&(this.seriesForm.floorPrice=this.seriesForm.floorPrice||this.seriesForm.price)})),"pushSeries",(function(){var e=this;if(1==this.seriesType){if(this.externalList.findIndex((function(t){return t.seriesId==e.seriesForm.seriesId}))>-1)return void this.$message.warning("The NFT series already exists");if(!this.seriesForm.seriesId)return void this.$message.warning("Please select the external NFT series");if(!this.seriesForm.chain){var t=this.downNft.find((function(t){return t.id==e.seriesForm.seriesId}));this.seriesForm.chain=t&&t.chainId}this.externalList.push(this.seriesForm)}else{if(this.platformList.findIndex((function(t){return t.seriesId==e.seriesForm.seriesId}))>-1)return void this.$message.warning("The NFT series already exists");if("TRUE"==this.seriesForm.baseStatus&&(this.seriesForm.multipleRate=1),this.platformList.push(this.seriesForm),"TRUE"==this.seriesForm.baseStatus&&this.platformList.length>1)for(var r=0;r<this.platformList.length;r++){var a=this.platformList[r];a.seriesId==this.seriesForm.seriesId?this.platformList[r].baseStatus="TRUE":this.platformList[r].baseStatus="FALSE"}var l=this.platformList;this.platformList=[],setTimeout((function(){e.platformList=l}),10)}this.$forceUpdate(),this.handleSeriesClose()})),"probability",(function(e,t){var r=this.ruleForm.innerBaseNumber,a=this.platformList.concat(this.externalList),l=0;a.forEach((function(e){if("EXTERNAL"==e.nftType)l+=Number(e.number||0);else{var t=Math.ceil(Number(new d.a(r||0).multipliedBy(e.multipleRate)));l+=t&&t>0?t:0}}));var i=Math.ceil(Number(new d.a(r||0).multipliedBy(e.multipleRate))),s=r&&i>0?i:0;if(1==t){if(!e.number)return"--"}else if(!s)return"--";return l?"".concat(1==t?new d.a(e.number||0).dividedBy(l||0).multipliedBy(100).toFixed(4):new d.a(s||0).dividedBy(l||0).multipliedBy(100).toFixed(4),"%"):"--"})),"calculationPlatformNft",(function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(c["a"])(Object(n["a"])().mark((function t(r){var a,l,i,s,c,u,p,b,h,f,g,v,x,y,N;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=30;break}if(a=e.fileImg,l=e.bloodPool,i=e.platformList,s=e.externalList,0!=a.length){t.next=5;break}return e.$message.error("Please upload a blind box picture!"),t.abrupt("return");case 5:if(!(!i.length>0)){t.next=8;break}return e.$message.error("Please select the internal NFT!"),t.abrupt("return");case 8:if(!(!s.length>0)){t.next=11;break}return e.$message.error("Please select the external NFT!"),t.abrupt("return");case 11:c=[],u=[],p=[],t.prev=14,s.forEach((function(e){if(!e.number||Number(e.number)<=0)throw new Error("error");"NFT"==e.type?u.push({seriesId:e.seriesId,nftNum:e.number}):p.push({seriesId:e.seriesId,nftNum:e.number})})),t.next=22;break;case 18:return t.prev=18,t.t0=t["catch"](14),e.$message.error("There is an external NFT series that does not enter the number, please replenish it after full review"),t.abrupt("return");case 22:return i.forEach((function(e){c.push({seriesId:e.seriesId,multipleRate:e.multipleRate,baseStatus:e.baseStatus})})),b=Object(o["a"])(Object(o["a"])({},e.ruleForm),{},{coin:e.coin,adjust:l.adjust,bloodPoolsStatus:l.bloodPoolsStatus,adjustCompulsionUpdateThreshold:Object(m["a"])(new d.a(l.adjustCompulsionUpdateThreshold||0).dividedBy(100),4),deviseRate:Object(m["a"])(new d.a(e.ruleForm.deviseRate).dividedBy(100),6),reduceThreshold:null!=e.ruleForm.reduceThreshold&&""!==e.ruleForm.reduceThreshold?Object(m["a"])(new d.a(e.ruleForm.reduceThreshold).dividedBy(100),6):null,platformList:c,externalList:u,externalCoinList:p}),t.next=26,e.$http.calculationPlatformNft(Object(o["a"])({},b));case 26:if(h=t.sent,h){for(e.ruleForm=Object(o["a"])(Object(o["a"])({},e.ruleForm),{},{expectRate:h.expectRate,lossRate:h.lossRate,innerBaseNumber:h.innerBaseNumber}),e.bloodPool.adjustRate=h.adjustRate,e.bloodPool.grossIncome=h.grossIncome,e.bloodPool.totalOpenNftPrice=h.totalOpenNftPrice,e.bloodPool.realRate=h.realRate,e.calculationNft=h.seriesSort,f=[],g=[],v=0;v<e.calculationNft.length;v++)for(x=0;x<e.platformList.length;x++)"PLATFORM"==e.calculationNft[v].nftType&&e.calculationNft[v].seriesId==e.platformList[x].seriesId&&(e.platformList[x].nftType="PLATFORM",e.platformList[x].price=e.calculationNft[v].averagePrice,f.push(e.platformList[x]));for(y=0;y<e.calculationNft.length;y++)for(N=0;N<e.externalList.length;N++)"EXTERNAL"==e.calculationNft[y].nftType&&e.calculationNft[y].seriesId==e.externalList[N].seriesId?(e.externalList[N].nftType="EXTERNAL",e.externalList[N].totalNumber=e.calculationNft[y].totalNumber,e.externalList[N].realNumber=e.calculationNft[y].realNumber,e.externalList[N].dwindleNumber=e.calculationNft[y].dwindleNumber,e.externalList[N].number=e.calculationNft[y].number,e.externalList[N].floorPrice=e.calculationNft[y].averagePrice,g.push(e.externalList[N])):"EXT_COIN"==e.calculationNft[y].nftType&&e.calculationNft[y].seriesId==e.externalList[N].seriesId&&(e.externalList[N].nftType="EXT_COIN",e.externalList[N].totalNumber=e.calculationNft[y].totalNumber,e.externalList[N].realNumber=e.calculationNft[y].realNumber,e.externalList[N].dwindleNumber=e.calculationNft[y].dwindleNumber,e.externalList[N].number=e.calculationNft[y].number,e.externalList[N].floorPrice=e.calculationNft[y].averagePrice,g.push(e.externalList[N]));e.platformList=[],e.externalList=[],setTimeout((function(){e.platformList=f,e.externalList=g}),10)}t.next=32;break;case 30:return console.log("error submit!!"),t.abrupt("return",!1);case 32:case"end":return t.stop()}}),t,null,[[14,18]])})));return function(e){return t.apply(this,arguments)}}())})),"handleNftDel",(function(e,t,r){1==r?this.externalList.splice(t,1):this.platformList.splice(t,1)})),Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(a,"handleSeriesClose",(function(e){e?e():(this.seriesForm={nftType:null,chain:null,seriesId:null,seriesName:null,floorPrice:null,price:null,multipleRate:null,baseStatus:"FALSE"},this.showSeriesDialog=!1)})),"handleClose",(function(e){var t=this;this.ruleForm={boxName:null,boxImg:null,boxIndex:null,price:null,coin:"ETH",fivePrice:null,tenPrice:null,deviseRate:null,reduceThreshold:null,legendNum:null,epicNum:null,rareNum:null,boxDesc:null,platformList:[],externalList:[],expectRate:null,lossRate:null,innerBaseNumber:null},this.bloodPool={grossIncome:0,totalOpenNftPrice:0,bloodPoolsStatus:"FALSE",adjust:null,adjustCompulsionUpdateThreshold:null,realRate:null,adjustRate:null},this.calculationNft=[],this.platformList=[],this.externalList=[],this.fileImg=[],this.fileImgOne=[],this.fileImgTwo=[],this.hideUpload=!1,this.hideUploadOne=!1,this.hideUploadTwo=!1,this.$forceUpdate(),setTimeout((function(){t.$refs["ruleForm"].clearValidate()}),10),e?e():this.showDialog=!1})),"chainFormat",(function(e){var t=h["a"].find((function(t){return t.chainId==e}));return t&&t.chainName})),"handleSizeChange",(function(e){this.size=e,this.fetchBoxManagerList()})),"handleCurrentChange",(function(e){this.page=e,this.fetchBoxManagerList(!1)})),"validateOne",(function(e,t,r){var a=this.ruleForm.fivePrice;Number(t)<=0||Number(t||0)<Number(a||0)?r(new Error("The unit price of single buy cannot be lower than the five -way unit price")):r()})),"validateFive",(function(e,t,r){var a=this.ruleForm.tenPrice;Number(t)<=0||Number(t||0)<Number(a||0)?r(new Error("The price of the five consecutive units cannot be lower than the ten consecutive unit price")):r()}))),created:function(){this.fetchBoxManagerList(),this.fetchNftExternalList(),this.getExternalCoinFunc(),this.fetchNftPlatformList(),this.uploadUrl=b["a"].api+"/file/upload/image",this.rules={boxName:[{required:!0,message:"Please enter the name of the blind box",trigger:["blur","change"]}],boxImg:[{required:!0,message:"Please select a blind box picture",trigger:["blur","change"]}],boxIndex:[{required:!0,message:"Please enter the recommended sequence",trigger:["blur","change"]}],price:[{required:!0,message:"Please enter the price",trigger:["blur","change"]},{validator:this.validateOne,trigger:["blur","change"]}],fivePrice:[{required:!0,message:"Please enter five consecutive prices",trigger:["blur","change"]},{validator:this.validateFive,trigger:["blur","change"]}],tenPrice:[{required:!0,message:"Please enter the ten consecutive price",trigger:["blur","change"]}],deviseRate:[{required:!0,message:"Please enter the design return rate",trigger:["blur","change"]}],legendNum:[{required:!0,message:"Please enter the number of legends",trigger:["blur","change"]}],epicNum:[{required:!0,message:"Please enter the number of poems",trigger:["blur","change"]}],rareNum:[{required:!0,message:"Please enter the rare quantity",trigger:["blur","change"]}],boxDesc:[{required:!0,message:"Please enter a blind box description",trigger:["blur","change"]}]}},computed:{coin:function(){return this.$store.getters.coinConfig},userType:function(){return this.$store.getters.accountConfig},commonNum:function(){var e=this.ruleForm,t=e.legendNum,r=e.epicNum,a=e.rareNum,l=this.externalList,i=this.platformList,s=Number(t)+Number(r)+Number(a),n=l.length+i.length;return s>=n?0:n-s},nftTotalNum:function(){var e=this.calculationNft,t=this.ruleForm.innerBaseNumber;if(!e.length>0)return 0;var r=0;return e.forEach((function(e){if("PLATFORM"==e.nftType){var a=Math.ceil(Number(new d.a(t||0).multipliedBy(e.multipleRate)));r+=a&&a>0?a:0}else r+=Number(e.number)})),r},legendNftProbability:function(){var e=this.ruleForm,t=e.legendNum,r=e.innerBaseNumber,a=this.calculationNft,l=this.nftTotalNum;if(!a.length>0)return 0;if(!t)return 0;var i=a.slice(0,t),s=0;return i.forEach((function(e){if("PLATFORM"==e.nftType){var t=Math.ceil(Number(new d.a(r||0).multipliedBy(e.multipleRate)));s+=t&&t>0?t:0}else s+=Number(e.number)})),new d.a(s).dividedBy(l).toFixed(6)},epicNftProbability:function(){var e=this.ruleForm,t=e.legendNum,r=e.epicNum,a=e.innerBaseNumber,l=this.calculationNft,i=this.nftTotalNum;if(!l.length>0)return 0;if(!r)return 0;var s=l.slice(t,Number(t)+Number(r)),n=0;return s.forEach((function(e){if("PLATFORM"==e.nftType){var t=Math.ceil(Number(new d.a(a||0).multipliedBy(e.multipleRate)));n+=t&&t>0?t:0}else n+=Number(e.number)})),new d.a(n).dividedBy(i).toFixed(6)},rareNftProbability:function(){var e=this.ruleForm,t=e.legendNum,r=e.epicNum,a=e.rareNum,l=e.innerBaseNumber,i=this.calculationNft,s=this.nftTotalNum;if(!i.length>0)return 0;if(!a)return 0;var n=i.slice(Number(t)+Number(r),Number(t)+Number(r)+Number(a)),o=0;return n.forEach((function(e){if("PLATFORM"==e.nftType){var t=Math.ceil(Number(new d.a(l||0).multipliedBy(e.multipleRate)));o+=t&&t>0?t:0}else o+=Number(e.number)})),new d.a(o).dividedBy(s).toFixed(6)},commonNftProbability:function(){var e=this.ruleForm,t=e.legendNum,r=e.epicNum,a=e.rareNum,l=e.innerBaseNumber,i=this.calculationNft,s=this.nftTotalNum,n=this.commonNum;if(!i.length>0)return 0;if(!a)return 0;var o=i.slice(Number(t)+Number(r)+Number(a),Number(t)+Number(r)+Number(a)+n),c=0;return o.forEach((function(e){if("PLATFORM"==e.nftType){var t=Math.ceil(Number(new d.a(l||0).multipliedBy(e.multipleRate)));c+=t&&t>0?t:0}else c+=Number(e.number)})),new d.a(c).dividedBy(s).toFixed(6)}},mounted:function(){},updated:function(){},beforeDestroy:function(){}},g=f,v=(r("9617"),r("2877")),x=Object(v["a"])(g,l,i,!1,null,"0b0f2b5b",null);t["default"]=x.exports},"7db0":function(e,t,r){"use strict";var a=r("23e7"),l=r("b727").find,i=r("44d2"),s="find",n=!0;s in[]&&Array(1)[s]((function(){n=!1})),a({target:"Array",proto:!0,forced:n},{find:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)},"822c":function(e,t,r){},9617:function(e,t,r){"use strict";r("822c")},a05a:function(e,t,r){e.exports=r.p+"static/img/icon_benchmark.0e42cc5b.svg"},c740:function(e,t,r){"use strict";var a=r("23e7"),l=r("b727").findIndex,i=r("44d2"),s="findIndex",n=!0;s in[]&&Array(1)[s]((function(){n=!1})),a({target:"Array",proto:!0,forced:n},{findIndex:function(e){return l(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)}}]);