(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33a5cbde"],{"3f32":function(e,t,a){"use strict";a.r(t);a("b680");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-wrapper"},[t("div",{staticClass:"public-list-inputs"},[t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter the blind box ID",clearable:""},model:{value:e.Id,callback:function(t){e.Id=t},expression:"Id"}}),t("el-input",{staticClass:"public-input",staticStyle:{width:"140px"},attrs:{placeholder:"Enter the name of the blind box",clearable:""},model:{value:e.boxName,callback:function(t){e.boxName=t},expression:"boxName"}}),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"External state",clearable:""},model:{value:e.externalStatus,callback:function(t){e.externalStatus=t},expression:"externalStatus"}},[t("el-option",{attrs:{label:"normal",value:"NORMAL"}}),t("el-option",{attrs:{label:"Insufficient quantity",value:"NUMBER"}})],1),t("el-select",{staticClass:"public-select-box",attrs:{"popper-class":"public-select-box",placeholder:"All states",clearable:""},model:{value:e.boxStatus,callback:function(t){e.boxStatus=t},expression:"boxStatus"}},[t("el-option",{attrs:{label:"closure",value:"DISABLE"}}),t("el-option",{attrs:{label:"normal",value:"NORMAL"}})],1),t("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.fetchBoxManagerList()}}},[e._v(" 查询 ")])],1),t("el-table",{staticClass:"public-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{key:"1",attrs:{prop:"id",label:"Blind box ID",align:"center"}}),t("el-table-column",{key:"3",attrs:{prop:"boxName",width:"120",label:"Blind Box Name",align:"center"}}),t("el-table-column",{key:"4",attrs:{prop:"totalWeight",label:"Total weight",align:"center"}}),t("el-table-column",{key:"5",attrs:{prop:"sales",label:"Sales volume",align:"center"}}),t("el-table-column",{key:"6",attrs:{prop:"grossIncome",label:"Total consumption(".concat(e.coin,")"),align:"center"}}),t("el-table-column",{key:"7",attrs:{prop:"totalExpenditure",label:"Total prize(".concat(e.coin,")"),align:"center"}}),t("el-table-column",{key:"10",attrs:{prop:"adjust",label:"Winning correction",align:"center"}}),t("el-table-column",{key:"11",attrs:{prop:"pastTraPrice",width:"120",label:"Actual return rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(new e.bigNumber(e.actualReturn(t.row)||0).multipliedBy(100).toFixed(2),"%"))+" ")]}}])}),t("el-table-column",{key:"12",attrs:{prop:"expectRate",label:"Expecting return rate",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(new e.bigNumber(t.row.expectRate||0).multipliedBy(100).toFixed(2),"%"))+" ")]}}])}),t("el-table-column",{key:"13",attrs:{prop:"openNumber",width:"120",label:"Rap the lottery return rate (based on ten consecutive draws)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("".concat(new e.bigNumber(e.paybackRate(t.row)||0).multipliedBy(100).toFixed(2),"%"))+" ")]}}])}),t("el-table-column",{key:"19",attrs:{prop:"bloodPoolsStatus",label:"state",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return["FALSE"==a.row.bloodPoolsStatus?t("span",{staticStyle:{color:"#ec5706"}},[e._v("closure")]):t("span",{staticStyle:{color:"#21ae04"}},[e._v("normal")])]}}])}),t("el-table-column",{key:"20",attrs:{prop:"id",label:"operate",align:"center",width:"110",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return e.onEbit(a.row)}}},[e._v(" edit ")]),t("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return e.operatingNft(a.row)}}},[e._v(" "+e._s("FALSE"==a.row.bloodPoolsStatus?"Open":"closure")+" ")])]}}])})],1),e.baseUserPage&&e.baseUserPage.total?t("el-pagination",{staticClass:"public-pagination",attrs:{background:"","current-page":e.page,"page-sizes":e.pagination.pageSizes,"page-size":e.size,layout:" sizes, prev, pager, next, jumper",total:e.baseUserPage.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e(),t("el-dialog",{attrs:{title:"Edit winning correction",visible:e.showDialog,width:"540px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.showDialog=t}}},[t("el-form",{ref:"ruleForm",staticClass:"add-form",attrs:{rules:e.rules,model:e.ruleForm,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"Winning correction",prop:"adjust"}},[t("el-input",{staticStyle:{width:"300px"},attrs:{type:"number",placeholder:"Please enter the winning amendment"},model:{value:e.ruleForm.adjust,callback:function(t){e.$set(e.ruleForm,"adjust",e._n(t))},expression:"ruleForm.adjust"}},[t("template",{slot:"append"},[e._v("%")])],2)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){return e.handleClose()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm()}}},[e._v("Sure")])],1)],1)],1)},l=[],o=a("c7eb"),r=a("5530"),s=a("1da1"),i=(a("99af4"),a("901e")),c=a.n(i),u=a("ed08"),p=a("1b80"),b={name:"BloodPoolManagement",components:{},data:function(){return{Id:null,boxName:null,externalStatus:null,boxStatus:null,page:1,size:20,tableData:null,baseUserPage:null,showDialog:!1,ruleForm:{adjust:null},rules:{adjust:[{required:!0,message:"Please enter the winning amendment",trigger:["blur","change"]}]}}},mixins:[p["a"]],methods:{bigNumber:c.a,timeForStr:u["h"],searchFun:function(){return{id:this.Id,boxName:this.boxName,externalStatus:this.externalStatus,boxStatus:this.boxStatus}},fetchBoxManagerList:function(){var e=arguments,t=this;return Object(s["a"])(Object(o["a"])().mark((function a(){var n,l,s,i,c,u,p,b;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=!(e.length>0&&void 0!==e[0])||e[0],l=t.searchFun(),s=t.size,i=t.coin,c=t.userType,u=t.page,n&&(t.page=1,u=1),p=Object(r["a"])(Object(r["a"])({},{coin:i,userType:c,size:s,page:u}),l),a.next=8,t.$http.getBoxManagerList(p);case 8:b=a.sent,b&&(t.baseUserPage=b,t.tableData=b.records);case 10:case"end":return a.stop()}}),a)})))()},onEbit:function(e){this.ruleForm.adjust=e.adjust,this.ruleForm.id=e.id,this.showDialog=!0},operatingNft:function(e){var t=this;this.$confirm("Are you sure you want ".concat("false"==e.bloodpoolsstatus?"Open":"to close",' "').concat(e.boxname||e.id,'"?'),"hint",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(s["a"])(Object(o["a"])().mark((function a(){var n;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=null,"FALSE"!=e.bloodPoolsStatus){a.next=7;break}return a.next=4,t.$http.boxManagerOpen({id:e.id});case 4:n=a.sent,a.next=10;break;case 7:return a.next=9,t.$http.boxManagerClose({id:e.id});case 9:n=a.sent;case 10:n&&(t.fetchBoxManagerList(),t.$message.success("Successful operation"));case 11:case"end":return a.stop()}}),a)})))).catch((function(e){console.error(e)}))},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(a){var n,l;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=8;break}return n=Object(r["a"])({},e.ruleForm),t.next=4,e.$http.boxManagerWinningRevision(Object(r["a"])({},n));case 4:l=t.sent,l&&(e.handleClose(),e.fetchBoxManagerList(),e.$refs["ruleForm"].resetFields(),e.$message.success("Successful operation!")),t.next=10;break;case 8:return console.log("error submit!!"),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},actualReturn:function(e){var t=e.totalExpenditure,a=e.adjust,n=e.grossIncome,l=new c.a(t||0).plus(a);return n?new c.a(l||0).dividedBy(n):0},paybackRate:function(e){var t=e.expectRate,a=new c.a(t||0).multipliedBy(t),n=this.actualReturn(e);return n?new c.a(a||0).dividedBy(n):0},handleClose:function(e){e?e():this.showDialog=!1},handleSizeChange:function(e){this.size=e,this.fetchBoxManagerList()},handleCurrentChange:function(e){this.page=e,this.fetchBoxManagerList(!1)}},created:function(){this.fetchBoxManagerList()},computed:{coin:function(){return this.$store.getters.coinConfig},userType:function(){return this.$store.getters.accountConfig}},mounted:function(){},updated:function(){},beforeDestroy:function(){}},d=b,f=(a("f158"),a("2877")),h=Object(f["a"])(d,n,l,!1,null,"0fe912ca",null);t["default"]=h.exports},"9e8a":function(e,t,a){},f158:function(e,t,a){"use strict";a("9e8a")}}]);