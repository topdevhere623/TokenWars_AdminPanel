(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b82bf35"],{"043a":function(e,t,a){},"0baa":function(e,t,a){"use strict";a("043a")},"202d":function(e,t,a){},"2e9f":function(e,t,a){},"3b50":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("b680");var r=function(){var e,t,a,r,i,l,n,o,s=this,c=s._self._c;return c("div",{staticClass:"page-wrapper activity-management-box"},[c("div",{staticClass:"public-list-inputs"},[c("div",{staticClass:"remittance-box"},[c("div",{staticClass:"remittance-amount remittance-more"},[c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Total number of participants")]),c("div",{staticClass:"val"},[s._v(s._s(s.aggregateQuery&&s.aggregateQuery.joinPeopleNum))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Total bonus")]),c("div",{staticClass:"val"},[s._v(s._s(s.aggregateQuery&&s.aggregateQuery.totalBonus))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("total points")]),c("div",{staticClass:"val"},[s._v(s._s(s.aggregateQuery&&s.aggregateQuery.totalPoint))])])])]),c("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-circle-plus-outline"},on:{click:function(e){return s.handleAdd()}}},[s._v(" Add activity ")])],1),c("el-table",{staticClass:"public-table",staticStyle:{width:"100%"},attrs:{data:s.tableData,border:""}},[c("el-table-column",{key:"1",attrs:{prop:"id",label:"Active ID",align:"center"}}),c("el-table-column",{key:"2",attrs:{prop:"name",label:"Event name",align:"center"}}),c("el-table-column",{key:"3",attrs:{prop:"banner",label:"Banner picture",width:"120px",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[c("div",{staticStyle:{width:"100px",height:"50px"}},[c("el-image",{staticStyle:{height:"100%"},attrs:{src:e.row.banner,"preview-src-list":[e.row.banner]}})],1)]}}])}),c("el-table-column",{key:"4",attrs:{prop:"seriesName",label:"type of activity",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[s._v(" "+s._s(s.getActivityName(e.row.activityType))+" ")]}}])}),c("el-table-column",{key:"5",attrs:{prop:"activityIndex",label:"Sort",align:"center"}}),c("el-table-column",{key:"6",attrs:{prop:"joinNum",label:"The number of participants",align:"center"}}),c("el-table-column",{key:"7",attrs:{label:"Have received/Total bonus",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[e.row.totalBonus?c("p",[s._v(" "+s._s(e.row.receivedBonus+" / "+e.row.totalBonus)+" ")]):c("p",[s._v("--")])]}}])}),c("el-table-column",{key:"8",attrs:{prop:"points",label:"total points",align:"center"}}),c("el-table-column",{key:"9",attrs:{prop:"relevancyBoxNumber",label:"Reward record",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[c("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return s.recordsShow(e.row)}}},[s._v(" Detail ")])]}}])}),c("el-table-column",{key:"10",attrs:{prop:"acticityStatus",width:"120",label:"状态",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return["IN_PROGRESS"==e.row.acticityStatus?c("p",{staticStyle:{color:"#67c23a"}},[s._v(" in progress ")]):"NOT_STARTED"==e.row.acticityStatus?c("p",{staticStyle:{color:"#e6a23c"}},[s._v(" has not started ")]):c("p",{staticStyle:{color:"#909399"}},[s._v("over")])]}}])}),c("el-table-column",{key:"11",attrs:{prop:"startTime",width:"140",label:"开始时间",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[s._v(" "+s._s(s.timeForStr(e.row.startTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),c("el-table-column",{key:"12",attrs:{prop:"endTime",width:"140",label:"结束时间",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[s._v(" "+s._s(s.timeForStr(e.row.endTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}])}),c("el-table-column",{key:"13",attrs:{label:"operate",align:"center",width:"140"},scopedSlots:s._u([{key:"default",fn:function(e){return[c("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return s.handleEdit(e.row)}}},[s._v(" "+s._s("ENDED"==e.row.acticityStatus?"Detail":"edit")+" ")]),"NOT_STARTED"==e.row.acticityStatus?c("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return s.handleTime(e.row,"start")}}},[s._v(" Start in advance ")]):s._e(),"IN_PROGRESS"==e.row.acticityStatus?c("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return s.handleTime(e.row,"end")}}},[s._v(" an early closure ")]):s._e(),"IN_PROGRESS"!=e.row.acticityStatus?c("span",{staticClass:"blueColor publick-button cursor",on:{click:function(t){return s.handleDel(e.row)}}},[s._v(" delete ")]):s._e()]}}])})],1),s.baseUserPage&&s.baseUserPage.total?c("el-pagination",{staticClass:"public-pagination",attrs:{background:"","current-page":s.page,"page-sizes":s.pagination.pageSizes,"page-size":s.size,layout:" sizes, prev, pager, next, jumper",total:s.baseUserPage.total},on:{"size-change":s.handleSizeChange,"current-change":s.handleCurrentChange}}):s._e(),s.showDialog?c("el-dialog",{attrs:{title:1==s.operatingType?"Add activity":"Editing activity",visible:s.showDialog,width:"940px","close-on-click-modal":!1,"before-close":s.handleClose,top:"5vh"},on:{"update:visible":function(e){s.showDialog=e}}},[c("div",{staticClass:"add-form-box"},[c("el-form",{ref:"ruleForm",staticClass:"add-form",attrs:{rules:s.rules,model:s.ruleForm,"label-width":"140px"}},[c("el-form-item",{attrs:{label:"type of activity",prop:"activityType",rules:s.rules.select}},[c("el-select",{staticStyle:{width:"350px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType},model:{value:s.ruleForm.activityType,callback:function(e){s.$set(s.ruleForm,"activityType",e)},expression:"ruleForm.activityType"}},s._l(s.typeOptions,(function(e,t){return c("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),c("el-form-item",{attrs:{label:"Event name",prop:"name",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"Please enter the name"},model:{value:s.ruleForm.name,callback:function(e){s.$set(s.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),c("el-form-item",{attrs:{label:"Activity banner",prop:"banner",rules:s.rules.select}},[c("el-upload",{class:{hide:s.hideUpload},attrs:{action:s.uploadUrl,"on-change":s.handleChange,"on-success":s.handleUpload,"file-list":s.fileImg,multiple:!1,limit:1,accept:"image/png,image/jpg,image/jpeg,image/gif,image/webp","list-type":"picture-card","before-upload":s.handleBefore,"on-remove":s.handleRemove,"on-exceed":s.handExceed,headers:s.uploadHeader}},[c("i",{staticClass:"el-icon-plus"})])],1),c("el-form-item",{attrs:{label:"Sort",prop:"activityIndex",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"The larger the numbers, the higher the higher"},model:{value:s.ruleForm.activityIndex,callback:function(e){s.$set(s.ruleForm,"activityIndex",e)},expression:"ruleForm.activityIndex"}})],1),c("el-form-item",{attrs:{label:"one-sentence introduction",prop:"shortWord",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"Please enter the name"},model:{value:s.ruleForm.shortWord,callback:function(e){s.$set(s.ruleForm,"shortWord",e)},expression:"ruleForm.shortWord"}})],1),"WELCOME_BONUS"!=s.ruleForm.activityType?[c("el-form-item",{attrs:{label:"Point ratio",prop:"pointRate",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{type:"number",placeholder:"Please enter the integral ratio"},model:{value:s.ruleForm.pointRate,callback:function(e){s.$set(s.ruleForm,"pointRate",e)},expression:"ruleForm.pointRate"}},[c("template",{slot:"append"},[s._v("Doubling")])],2)],1),c("el-form-item",{attrs:{label:"Maximum",prop:"maxPoint",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"Please enter the maximum points"},model:{value:s.ruleForm.maxPoint,callback:function(e){s.$set(s.ruleForm,"maxPoint",e)},expression:"ruleForm.maxPoint"}})],1)]:[c("el-form-item",{attrs:{label:"Minimum recharge",prop:"lowRecharge",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,type:"number",placeholder:"Please enter the minimum recharge"},model:{value:s.ruleForm.lowRecharge,callback:function(e){s.$set(s.ruleForm,"lowRecharge",e)},expression:"ruleForm.lowRecharge"}},[c("template",{slot:"append"},[s._v(s._s(s.coin))])],2)],1),c("el-form-item",{attrs:{label:"Bonus ratio",prop:"bonusRate",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,type:"number",placeholder:"Please enter the bonus ratio"},model:{value:s.ruleForm.bonusRate,callback:function(e){s.$set(s.ruleForm,"bonusRate",e)},expression:"ruleForm.bonusRate"}},[c("template",{slot:"append"},[s._v("Doubling")])],2)],1),c("el-form-item",{attrs:{label:"Maximum bonus",prop:"maxBonusLimit",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,type:"number",placeholder:"Please enter the maximum bonus"},model:{value:s.ruleForm.maxBonusLimit,callback:function(e){s.$set(s.ruleForm,"maxBonusLimit",e)},expression:"ruleForm.maxBonusLimit"}},[c("template",{slot:"append"},[s._v(s._s(s.coin))])],2)],1),c("el-form-item",{attrs:{label:"Unlock the flow rate required",prop:"unlockFlowRate",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"350px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,type:"number",placeholder:"Please enter the unlocked flowing rate required"},model:{value:s.ruleForm.unlockFlowRate,callback:function(e){s.$set(s.ruleForm,"unlockFlowRate",e)},expression:"ruleForm.unlockFlowRate"}},[c("template",{slot:"append"},[s._v("Doubling")])],2)],1),c("div",{staticClass:"flex"},[c("el-form-item",{attrs:{label:"Unlocking round",prop:"unlockNum",rules:s.rules.blur}},[c("el-input",{staticStyle:{width:"200px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,type:"number",placeholder:"Please enter the unlock wheel"},model:{value:s.ruleForm.unlockNum,callback:function(e){s.$set(s.ruleForm,"unlockNum",e)},expression:"ruleForm.unlockNum"}},[c("template",{slot:"append"},[s._v("Second-rate")])],2)],1),s.ruleForm.unlockNum>0?c("el-form-item",{attrs:{label:"Unlock ratio"}},[c("p",{staticStyle:{"line-height":"28px"}},[s._v(" "+s._s((1/s.ruleForm.unlockNum*100).toFixed(2))+"% ")])]):s._e()],1)],c("el-form-item",{attrs:{label:"Start and end time",prop:"startTime",rules:s.rules.select}},[c("div",{staticClass:"flex"},[c("el-date-picker",{staticStyle:{width:"200px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"Choose start time"},model:{value:s.ruleForm.startTime,callback:function(e){s.$set(s.ruleForm,"startTime",e)},expression:"ruleForm.startTime"}}),c("p",[s._v("to")]),c("el-date-picker",{staticStyle:{width:"200px"},attrs:{disabled:"IN_PROGRESS"==s.ruleForm.acticityStatus&&1!=s.operatingType,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"Choose start time"},model:{value:s.ruleForm.endTime,callback:function(e){s.$set(s.ruleForm,"endTime",e)},expression:"ruleForm.endTime"}})],1)]),c("el-form-item",{attrs:{label:"Activity description",prop:"activityDesc",rules:s.rules.blur}},[c("quillEditor",{attrs:{content:s.ruleForm.activityDesc},on:{change:s.editorDetailFunc}})],1),c("el-form-item",{attrs:{label:"terms and conditions",prop:"conditionRule",rules:s.rules.blur}},[c("quillEditor",{attrs:{content:s.ruleForm.conditionRule},on:{change:s.editorRuleFunc}})],1)],2)],1),c("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[c("el-button",{on:{click:function(e){return s.handleClose()}}},[s._v("Cancel")]),c("el-button",{attrs:{disabled:"ENDED"==s.ruleForm.acticityStatus,type:"primary"},on:{click:function(e){return s.submitForm()}}},[s._v("Sure")])],1)]):s._e(),s.showDetailDialog?c("el-dialog",{attrs:{title:"Reward record",visible:s.showDetailDialog,width:"1200px","close-on-click-modal":!1},on:{"update:visible":function(e){s.showDetailDialog=e}}},[c("div",{staticClass:"page-wrapper showDetailDialog"},[[c("div",{staticClass:"public-list-inputs"},[c("el-input",{staticClass:"public-input",staticStyle:{width:"200px"},attrs:{placeholder:"Enter the player's nickname/ID",clearable:""},model:{value:s.obscureField,callback:function(e){s.obscureField=e},expression:"obscureField"}}),c("el-button",{staticClass:"public-search",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return s.getAwardsRecords()}}},[s._v(" Inquire ")])],1),"WELCOME_BONUS"==s.row.activityType?c("div",{staticClass:"remittance-box"},[c("div",{staticClass:"remittance-amount remittance-more"},[c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("The number of participants")]),c("div",{staticClass:"val"},[s._v(s._s(null===(e=s.rewardRecordStatic)||void 0===e?void 0:e.joinPeopleNum))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Total recharge")]),c("div",{staticClass:"val"},[s._v(s._s(null===(t=s.rewardRecordStatic)||void 0===t?void 0:t.totalRecharge))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Total bonus")]),c("div",{staticClass:"val"},[s._v(s._s(null===(a=s.rewardRecordStatic)||void 0===a?void 0:a.totalBonus))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Total flow")]),c("div",{staticClass:"val"},[s._v(s._s(null===(r=s.rewardRecordStatic)||void 0===r?void 0:r.totalFlowNums))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Unlock")]),c("div",{staticClass:"val"},[s._v(s._s(null===(i=s.rewardRecordStatic)||void 0===i?void 0:i.totalUnlocks))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Always receive")]),c("div",{staticClass:"val"},[s._v(s._s(null===(l=s.rewardRecordStatic)||void 0===l?void 0:l.totalReceive))])]),c("div",{staticClass:"remittance-item"},[c("div",{staticClass:"title"},[s._v("Never lead")]),c("div",{staticClass:"val"},[s._v(" "+s._s(s.accurateDecimal(new s.bigNumber((null===(n=s.rewardRecordStatic)||void 0===n?void 0:n.totalUnlocks)-(null===(o=s.rewardRecordStatic)||void 0===o?void 0:o.totalReceive)||0),4))+" ")])])])]):s._e()],c("el-table",{staticStyle:{width:"100%"},attrs:{data:s.rewardRecordList,border:""}},[c("el-table-column",{key:"0",attrs:{prop:"id",label:"Player ID/Nick name",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[c("p",{style:{color:"INNER"==e.row.userType?"red":"#000"}},[s._v(" "+s._s(e.row.userId||"--")+" ")]),c("p",{style:{color:"INNER"==e.row.userType?"red":"#000"}},[s._v(" "+s._s(e.row.userName||"--")+" ")])]}}],null,!1,1477483966)}),"WELCOME_BONUS"==s.row.activityType?[c("el-table-column",{key:"1",attrs:{prop:"rechargeAmount",width:"120",label:"Recharge amount",align:"center"}}),c("el-table-column",{key:"2",attrs:{prop:"rechargeTime",label:"Recharge time",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[s._v(" "+s._s(s.timeForStr(e.row.rechargeTime,"YYYY-MM-DD HH:mm:ss"))+" ")]}}],null,!1,2965986163)}),c("el-table-column",{key:"4",attrs:{prop:"totalRewards",label:"Total bonus",align:"center"}}),c("el-table-column",{key:"5",attrs:{prop:"flowAmount",label:"Dowded",align:"center"}}),c("el-table-column",{key:"6",attrs:{prop:"unlockReward",label:"Unlock bonus",align:"center"}}),c("el-table-column",{key:"7",attrs:{prop:"receivedReward",label:"Receive bonus",align:"center"}}),c("el-table-column",{key:"8",attrs:{prop:"walletAddress",label:"Unblocked bonus",align:"center"},scopedSlots:s._u([{key:"default",fn:function(e){return[s._v(" "+s._s(s.accurateDecimal(new s.bigNumber(e.row.unlockReward-e.row.receivedReward||0),4))+" ")]}}],null,!1,3124600521)})]:[c("el-table-column",{key:"9",attrs:{prop:"flowAmount",label:"Flowing water",align:"center"}}),c("el-table-column",{key:"10",attrs:{prop:"totalPoints",label:"total points",align:"center"}})]],2),s.rewardBaseUserPage&&s.rewardBaseUserPage.total?c("el-pagination",{staticClass:"public-pagination",attrs:{background:"","current-page":s.rewardPage,"page-sizes":s.pagination.pageSizes,"page-size":s.size,layout:" sizes, prev, pager, next, jumper",total:s.rewardBaseUserPage.total},on:{"size-change":s.rewardHandleSizeChange,"current-change":s.rewardHandleCurrentChange}}):s._e()],2),c("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[c("el-button",{attrs:{type:"primary"},on:{click:function(e){s.showDetailDialog=!1}}},[s._v("closure")])],1)]):s._e()],1)},i=[],l=a("c7eb"),n=a("5530"),o=a("1da1"),s=(a("99af4"),a("4de4"),a("14d9"),a("e9c4"),a("b64b"),a("d3b7"),a("bc3a"),a("ed08")),c=a("1b80"),u=a("51be"),d=a("892c"),p=a("901e"),m=a.n(p),b={name:"ExternalTokenManagement",components:{quillEditor:d["a"]},data:function(){return{typeOptions:[{label:"Bonus",value:"WELCOME_BONUS"},{label:"Open the box to win points",value:"OPEN_BOX_WIN_POINTS"},{label:"Treasure Winning points",value:"TREASURES_WIN_POINTS"}],showDialog:!1,showDetailDialog:!1,page:1,size:20,tableData:null,aggregateQuery:{},baseUserPage:null,uploadUrl:"",fileImg:[],limitCount:1,hideUpload:!1,uploadHeader:{certificate:sessionStorage.getItem("token")},coin:"USDT",ruleForm:{name:null,activityType:null,banner:null,activityIndex:null,shortWord:null,lowRecharge:null,bonusRate:null,maxBonusLimit:null,unlockFlowRate:null,unlockNum:null,pointRate:null,maxPoint:null,startTime:null,endTime:null,activityDesc:null,conditionRule:null},ruleFormClone:{},rules:{select:[{required:!0,message:"please choose",trigger:["blur","change"]}],blur:[{required:!0,message:"please enter",trigger:["blur","change"]}]},row:{},obscureField:null,rewardPage:1,rewardBaseUserPage:null,rewardRecordList:[],rewardRecordStatic:{}}},mixins:[c["a"]],methods:{timeForStr:s["h"],bigNumber:m.a,accurateDecimal:s["a"],getActivityName:function(e){var t=this.typeOptions.filter((function(t){return t.value==e}));return t&&(null===t||void 0===t?void 0:t.length)>0?t[0].label:""},getTableList:function(){var e=arguments,t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r,i,o,s,c,u;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=!(e.length>0&&void 0!==e[0])||e[0],i=t.size,o=t.page,r&&(t.page=1,o=1),s=Object(n["a"])({},{size:i,page:o}),a.next=7,t.$http.activityManagerPageList(s);case 7:return c=a.sent,c&&(t.baseUserPage=c,t.tableData=c.records),delete s.size,delete s.page,a.next=13,t.$http.activityHeaderDataTotal(s);case 13:u=a.sent,u&&(t.aggregateQuery=u);case 15:case"end":return a.stop()}}),a)})))()},handleAdd:function(){this.operatingType=1,this.hideUpload=!1,this.fileImg=[],this.ruleForm=JSON.parse(JSON.stringify(this.ruleFormClone)),this.showDialog=!0},handleEdit:function(e){this.ruleForm=Object(n["a"])({},e),this.fileImg=[{url:e.banner}],this.operatingType=2,this.hideUpload=!0,this.showDialog=!0},recordsShow:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.row=e,t.getAwardsRecords();case 2:case"end":return a.stop()}}),a)})))()},getAwardsRecords:function(){var e=arguments,t=this;return Object(o["a"])(Object(l["a"])().mark((function a(){var r,i,n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=!(e.length>0&&void 0!==e[0])||e[0],r&&(t.rewardPage=1),a.next=4,t.$http.activityManagerDetailPageList({id:t.row.id,obscureField:t.obscureField,page:t.rewardPage,size:t.size});case 4:if(i=a.sent,!i){a.next=13;break}return t.rewardBaseUserPage=i,t.rewardRecordList=i.records,t.showDetailDialog=!0,a.next=11,t.$http.activityManagerDetailHeaderDataTotal({id:t.row.id,obscureField:t.obscureField});case 11:n=a.sent,n&&(t.rewardRecordStatic=n,t.showDetailDialog=!0);case 13:case"end":return a.stop()}}),a)})))()},editorDetailFunc:function(e){this.ruleForm.activityDesc=e,console.log(e)},editorRuleFunc:function(e){this.ruleForm.conditionRule=e},handleTime:function(e,t){var a=this;this.$confirm('Make sure the event" '.concat(e.name,'} "advance ').concat(" start "==t?" Start ":" End ","?"),"hint",{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(o["a"])(Object(l["a"])().mark((function r(){var i;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i=null,"start"!=t){r.next=7;break}return r.next=4,a.$http.activityManagerAdvanceStart({id:e.id});case 4:i=r.sent,r.next=10;break;case 7:return r.next=9,a.$http.activityManagerAdvanceEnd({id:e.id});case 9:i=r.sent;case 10:i&&(a.getTableList(),a.$message.success("Successful operation"));case 11:case"end":return r.stop()}}),r)})))).catch((function(e){console.error(e)}))},handleDel:function(e){var t=this;this.$confirm('Are you going to delete" '.concat(e.name,' "?'),{confirmButtonText:"Sure",cancelButtonText:"Cancel",type:"info"}).then(Object(o["a"])(Object(l["a"])().mark((function a(){var r;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$http.activityManagerRemove({id:e.id});case 2:r=a.sent,r&&(t.getTableList(),t.$message.success("Successful operation"));case 4:case"end":return a.stop()}}),a)})))).catch((function(e){console.error(e)}))},handleClose:function(e){this.fileImg=[],this.$refs["ruleForm"].clearValidate(),e?e():this.showDialog=!1},handleUpload:function(e){if(200==e.code)return this.fileImg.push({url:e.data}),void(this.ruleForm.banner=e.data);this.$message.error("upload failed")},handleBefore:function(e){var t=this,a=e.size/1024/1024<2;return a||t.$message.error("The file is too large, and the file size is less than 2M"),a},handleChange:function(e,t){this.hideUpload=t.length>=this.limitCount},handleRemove:function(e,t){this.hideUpload=t.length>=this.limitCount,this.fileImg=[]},handExceed:function(e){this.$message.error("File can only upload one")},submitForm:function(){var e=this;this.$refs.ruleForm.validate(function(){var t=Object(o["a"])(Object(l["a"])().mark((function t(a){var r,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=21;break}if(0!=e.fileImg.length){t.next=4;break}return e.$message.error("Please upload the picture!"),t.abrupt("return");case 4:if(r=Object(n["a"])({},e.ruleForm),i=null,1!=e.operatingType){t.next=13;break}return r.banner=e.fileImg[0].url,t.next=10,e.$http.activityManagerAdd(Object(n["a"])({},r));case 10:i=t.sent,t.next=18;break;case 13:return r.startTime=Object(s["h"])(r.startTime,"YYYY-MM-DD HH:mm:ss"),r.endTime=r.endTime?Object(s["h"])(r.endTime,"YYYY-MM-DD HH:mm:ss"):null,t.next=17,e.$http.activityManagerUpdate(Object(n["a"])({},r));case 17:i=t.sent;case 18:i&&(e.handleClose(),e.$refs["ruleForm"].resetFields(),e.$message.success("Successful operation!"),e.getTableList(),e.fileImg=[],e.ruleForm.activityDesc=null,e.ruleForm.conditionRule=null),t.next=23;break;case 21:return console.log("error submit!!"),t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},handleSizeChange:function(e){this.size=e,this.getTableList()},handleCurrentChange:function(e){this.page=e,this.getTableList(!1)},rewardHandleSizeChange:function(e){this.size=e,this.getAwardsRecords()},rewardHandleCurrentChange:function(e){this.rewardPage=e,this.getAwardsRecords(!1)}},created:function(){this.ruleFormClone=JSON.parse(JSON.stringify(this.ruleForm)),this.getTableList(),this.uploadUrl=u["a"].api+"/file/upload/image"},mounted:function(){},updated:function(){},beforeDestroy:function(){}},h=b,g=(a("e977"),a("a09f"),a("2877")),v=Object(g["a"])(h,r,i,!1,null,"3e12071e",null);t["default"]=v.exports},"892c":function(e,t,a){"use strict";var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quillEditorBox"},[t("quill-editor",{ref:"newEditor",staticClass:"editor",attrs:{options:e.editorOption},on:{change:function(t){return e.onEditorChange(t)}},model:{value:e.ruleForm.content,callback:function(t){e.$set(e.ruleForm,"content",t)},expression:"ruleForm.content"}})],1)},i=[],l=a("5530"),n=(a("a753"),a("8096"),a("14e1"),a("953d")),o=a("d4ec"),s=a("bee2"),c=a("8f33"),u=a("45eb"),d=a("7e84"),p=a("262e"),m=(a("99af4"),a("13d5"),a("d3b7"),n["Quill"].import("blots/block/embed")),b=n["Quill"].import("formats/link"),h=["height","width"],g=function(e){function t(){return Object(o["a"])(this,t),Object(c["a"])(this,t,arguments)}return Object(p["a"])(t,e),Object(s["a"])(t,[{key:"format",value:function(e,a){h.indexOf(e)>-1?a?this.domNode.setAttribute(e,a):this.domNode.removeAttribute(e):Object(u["a"])(Object(d["a"])(t.prototype),"format",this).call(this,e,a)}},{key:"html",value:function(){var e=this.value(),t=e.video;return'<a href="'.concat(t,'">').concat(t,"</a>")}}],[{key:"create",value:function(e){var a=Object(u["a"])(Object(d["a"])(t),"create",this).call(this,e);return a.setAttribute("controls","controls"),a.setAttribute("controlsList","nofullscreen"),a.setAttribute("type","video/mp4"),a.setAttribute("style","object-fit:fill;width: 100%;"),a.setAttribute("preload","auto"),a.setAttribute("playsinline","true"),a.setAttribute("x-webkit-airplay","allow"),a.setAttribute("x5-video-orientation","portraint"),a.setAttribute("x5-playsinline","true"),a.setAttribute("x5-video-player-fullscreen","true"),a.setAttribute("src",this.sanitize(e)),a}},{key:"formats",value:function(e){return h.reduce((function(t,a){return e.hasAttribute(a)&&(t[a]=e.getAttribute(a)),t}),{})}},{key:"sanitize",value:function(e){return b.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}])}(m);g.blotName="video",g.className="ql-video",g.tagName="video";var v=g,f=a("c7eb"),y=a("1da1"),w=(a("b0c0"),a("b64b"),a("51be")),k=w["a"].api,S={action:k+"file/upload/image",methods:"POST",token:sessionStorage.getItem("token"),name:"file",accept:"image/png, image/gif, image/jpeg, image/bmp, image/x-icon"},x=[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]],_={image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null===t&&(t=document.createElement("input"),t.setAttribute("type","file"),S.name&&t.setAttribute("name",S.name),t.setAttribute("accept",S.accept),t.classList.add("ql-image"),t.addEventListener("change",Object(y["a"])(Object(f["a"])().mark((function a(){var r,i;return Object(f["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=new FormData,r.append(S.name,t.files[0]),r.append("imageType","context_edit"),i=new XMLHttpRequest,i.open(S.methods,S.action,!0),i.setRequestHeader("certificate",S.token),i.onload=function(a){if(200===i.status){var r=JSON.parse(i.responseText),l=e.quill.getSelection(!0).index;e.quill.insertEmbed(l,"image",r.data),e.quill.setSelection(l+1)}t.value=""},i.upload.onloadstart=function(e){t.value=""},i.upload.onerror=function(e){},i.upload.onloadend=function(e){},i.send(r);case 11:case"end":return a.stop()}}),a)})))),this.container.appendChild(t)),t.click()},video:function(e){e?document.querySelector(".avatar-uploader-editor-video input").click():this.quill.format("video",!1)}},F={placeholder:"",theme:"snow",modules:{toolbar:{container:x,handlers:_}}};n["Quill"].register(v,!0);var C=n["Quill"].import("attributors/style/size");C.whitelist=["12px","14px","16px","18px","20px","24px","28px","32px","36px"],n["Quill"].register(C,!0);var R=n["Quill"].import("attributors/style/font"),T=["SimSun","SimHei","Microsoft-YaHei","KaiTi","FangSong"];R.whitelist=T,n["Quill"].register(R,!0);var O=[["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{align:[]}],[{size:C.whitelist}],[{font:T}],[{header:[1,2,3,4,5,6,!1]}],[{direction:"ltl"}],[{direction:"rtl"}],[{indent:"-1"},{indent:"+1"}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],["clean"],["link","image","video"]],D={props:{content:{type:String,default:""}},data:function(){return{editorOption:Object(l["a"])(Object(l["a"])({},F),{},{modules:{toolbar:{container:O}}}),ruleForm:{content:""}}},components:{quillEditor:n["quillEditor"]},watch:{content:function(){this.ruleForm.content=this.content}},created:function(){this.ruleForm.content=this.content},mounted:function(){var e=this.$refs.newEditor.quill;e.format("color","#a9a4b4")},methods:{onEditorChange:function(e){e.quill;var t=e.html,a=e.text;this.ruleForm.content=t,this.ruleForm.contentText=a,this.$emit("change",this.ruleForm.content,this.ruleForm.contentText)}}},N=D,E=(a("0baa"),a("9f5f"),a("2877")),P=Object(E["a"])(N,r,i,!1,null,"4c7efa59",null);t["a"]=P.exports},"9f5f":function(e,t,a){"use strict";a("be83")},a09f:function(e,t,a){"use strict";a("2e9f")},be83:function(e,t,a){},e977:function(e,t,a){"use strict";a("202d")}}]);